(()=>{"use strict";var e,t,n,r,s={4190:(e,t,n)=>{var r,s,o,i,a=n(9253),c=n(8041),l=n(2328),u=n(2917),h=n(2852),m=n(1419),f=n(9942),p=n(2406),d=n(4328);function g(e,t){if(e.length<t.length)return!1;for(var n=0;n<t.length;n++)if(e[n]!==t[n])return!1;return!0}function y(e,t){var n=e.length-t.length;return n>0?e.lastIndexOf(t)===n:0===n&&e===t}function v(e){return g(e,"(?i)")?new RegExp(e.substring(4),"i"):new RegExp(e)}function b(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(typeof e!=typeof t)return!1;if("object"!=typeof e)return!1;if(Array.isArray(e)!==Array.isArray(t))return!1;var n,r;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(!b(e[n],t[n]))return!1}else{var s=[];for(r in e)s.push(r);s.sort();var o=[];for(r in t)o.push(r);if(o.sort(),!b(s,o))return!1;for(n=0;n<s.length;n++)if(!b(e[s[n]],t[s[n]]))return!1}return!0}function S(e){return"number"==typeof e}function x(e){return"boolean"==typeof e}(o=s||(s={}))[o.Undefined=0]="Undefined",o[o.EnumValueMismatch=1]="EnumValueMismatch",o[o.Deprecated=2]="Deprecated",o[o.UnexpectedEndOfComment=257]="UnexpectedEndOfComment",o[o.UnexpectedEndOfString=258]="UnexpectedEndOfString",o[o.UnexpectedEndOfNumber=259]="UnexpectedEndOfNumber",o[o.InvalidUnicode=260]="InvalidUnicode",o[o.InvalidEscapeCharacter=261]="InvalidEscapeCharacter",o[o.InvalidCharacter=262]="InvalidCharacter",o[o.PropertyExpected=513]="PropertyExpected",o[o.CommaExpected=514]="CommaExpected",o[o.ColonExpected=515]="ColonExpected",o[o.ValueExpected=516]="ValueExpected",o[o.CommaOrCloseBacketExpected=517]="CommaOrCloseBacketExpected",o[o.CommaOrCloseBraceExpected=518]="CommaOrCloseBraceExpected",o[o.TrailingComma=519]="TrailingComma",o[o.DuplicateKey=520]="DuplicateKey",o[o.CommentNotPermitted=521]="CommentNotPermitted",o[o.SchemaResolveError=768]="SchemaResolveError",(i||(i={})).LATEST={textDocument:{completion:{completionItem:{documentationFormat:[h.nw.Markdown,h.nw.PlainText],commitCharactersSupport:!0}}}};var A=(e,t,...n)=>0===n.length?t:t.replace(/{(\d+)}/g,((e,[t])=>t in n?String(n[t]):e));function w(){return A}var M,P,k,T=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),O=w(),C={"color-hex":{errorMessage:O("colorHexFormatWarning","Invalid color format. Use #RGB, #RGBA, #RRGGBB or #RRGGBBAA."),pattern:/^#([0-9A-Fa-f]{3,4}|([0-9A-Fa-f]{2}){3,4})$/},"date-time":{errorMessage:O("dateTimeFormatWarning","String is not a RFC3339 date-time."),pattern:/^(\d{4})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])T([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\.[0-9]+)?(Z|(\+|-)([01][0-9]|2[0-3]):([0-5][0-9]))$/i},date:{errorMessage:O("dateFormatWarning","String is not a RFC3339 date."),pattern:/^(\d{4})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])$/i},time:{errorMessage:O("timeFormatWarning","String is not a RFC3339 time."),pattern:/^([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\.[0-9]+)?(Z|(\+|-)([01][0-9]|2[0-3]):([0-5][0-9]))$/i},email:{errorMessage:O("emailFormatWarning","String is not an e-mail address."),pattern:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/}},V=function(){function e(e,t,n){void 0===n&&(n=0),this.offset=t,this.length=n,this.parent=e}return Object.defineProperty(e.prototype,"children",{get:function(){return[]},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"type: "+this.type+" ("+this.offset+"/"+this.length+")"+(this.parent?" parent: {"+this.parent.toString()+"}":"")},e}();function j(e){return x(e)?e?{}:{not:{}}:e}T((function(e,t){var n=k.call(this,e,t)||this;return n.type="null",n.value=null,n}),k=V),function(e){T((function(t,n,r){var s=e.call(this,t,r)||this;return s.type="boolean",s.value=n,s}),e)}(V),function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.type="array",r.items=[],r}T(t,e),Object.defineProperty(t.prototype,"children",{get:function(){return this.items},enumerable:!1,configurable:!0})}(V),function(e){T((function(t,n){var r=e.call(this,t,n)||this;return r.type="number",r.isInteger=!0,r.value=Number.NaN,r}),e)}(V),function(e){T((function(t,n,r){var s=e.call(this,t,n,r)||this;return s.type="string",s.value="",s}),e)}(V),function(e){function t(t,n,r){var s=e.call(this,t,n)||this;return s.type="property",s.colonOffset=-1,s.keyNode=r,s}T(t,e),Object.defineProperty(t.prototype,"children",{get:function(){return this.valueNode?[this.keyNode,this.valueNode]:[this.keyNode]},enumerable:!1,configurable:!0})}(V),function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.type="object",r.properties=[],r}T(t,e),Object.defineProperty(t.prototype,"children",{get:function(){return this.properties},enumerable:!1,configurable:!0})}(V),(P=M||(M={}))[P.Key=0]="Key",P[P.Enum=1]="Enum";var E=function(){function e(e,t){void 0===e&&(e=-1),this.focusOffset=e,this.exclude=t,this.schemas=[]}return e.prototype.add=function(e){this.schemas.push(e)},e.prototype.merge=function(e){Array.prototype.push.apply(this.schemas,e.schemas)},e.prototype.include=function(e){return(-1===this.focusOffset||function(e,t,n){return void 0===n&&(n=!1),t>=e.offset&&t<e.offset+e.length||n&&t===e.offset+e.length}(e,this.focusOffset))&&e!==this.exclude},e.prototype.newSub=function(){return new e(-1,this.exclude)},e}(),I=function(){function e(){}return Object.defineProperty(e.prototype,"schemas",{get:function(){return[]},enumerable:!1,configurable:!0}),e.prototype.add=function(e){},e.prototype.merge=function(e){},e.prototype.include=function(e){return!0},e.prototype.newSub=function(){return this},e.instance=new e,e}(),$=function(){function e(){this.problems=[],this.propertiesMatches=0,this.propertiesValueMatches=0,this.primaryValueMatches=0,this.enumValueMatch=!1,this.enumValues=void 0}return e.prototype.hasProblems=function(){return!!this.problems.length},e.prototype.mergeAll=function(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];this.merge(r)}},e.prototype.merge=function(e){this.problems=this.problems.concat(e.problems)},e.prototype.mergeEnumValues=function(e){if(!this.enumValueMatch&&!e.enumValueMatch&&this.enumValues&&e.enumValues){this.enumValues=this.enumValues.concat(e.enumValues);for(var t=0,n=this.problems;t<n.length;t++){var r=n[t];r.code===s.EnumValueMismatch&&(r.message=O("enumWarning","Value is not accepted. Valid values: {0}.",this.enumValues.map((function(e){return JSON.stringify(e)})).join(", ")))}}},e.prototype.mergePropertyMatch=function(e){this.merge(e),this.propertiesMatches++,(e.enumValueMatch||!e.hasProblems()&&e.propertiesMatches)&&this.propertiesValueMatches++,e.enumValueMatch&&e.enumValues&&1===e.enumValues.length&&this.primaryValueMatches++},e.prototype.compare=function(e){var t=this.hasProblems();return t!==e.hasProblems()?t?-1:1:this.enumValueMatch!==e.enumValueMatch?e.enumValueMatch?-1:1:this.primaryValueMatches!==e.primaryValueMatches?this.primaryValueMatches-e.primaryValueMatches:this.propertiesValueMatches!==e.propertiesValueMatches?this.propertiesValueMatches-e.propertiesValueMatches:this.propertiesMatches-e.propertiesMatches},e}();function F(e){return l.yQ(e)}function N(e,t,n,r){if(e&&r.include(e)){var o=e;switch(o.type){case"object":!function(e,t,n,r){for(var s=Object.create(null),o=[],i=0,a=e.properties;i<a.length;i++)s[Y=(g=a[i]).keyNode.value]=g.valueNode,o.push(Y);if(Array.isArray(t.required))for(var c=0,l=t.required;c<l.length;c++)if(!s[k=l[c]]){var u=e.parent&&"property"===e.parent.type&&e.parent.keyNode,h=u?{offset:u.offset,length:u.length}:{offset:e.offset,length:1};n.problems.push({location:h,message:O("MissingRequiredPropWarning",'Missing property "{0}".',k)})}var m=function(e){for(var t=o.indexOf(e);t>=0;)o.splice(t,1),t=o.indexOf(e)};if(t.properties)for(var f=0,p=Object.keys(t.properties);f<p.length;f++){m(k=p[f]);var d=t.properties[k];if(D=s[k])if(x(d))if(d)n.propertiesMatches++,n.propertiesValueMatches++;else{var g=D.parent;n.problems.push({location:{offset:g.keyNode.offset,length:g.keyNode.length},message:t.errorMessage||O("DisallowedExtraPropWarning","Property {0} is not allowed.",k)})}else N(D,d,V=new $,r),n.mergePropertyMatch(V)}if(t.patternProperties)for(var y=0,b=Object.keys(t.patternProperties);y<b.length;y++)for(var A=b[y],w=v(A),M=0,P=o.slice(0);M<P.length;M++){var k=P[M];w.test(k)&&(m(k),(D=s[k])&&(x(d=t.patternProperties[A])?d?(n.propertiesMatches++,n.propertiesValueMatches++):(g=D.parent,n.problems.push({location:{offset:g.keyNode.offset,length:g.keyNode.length},message:t.errorMessage||O("DisallowedExtraPropWarning","Property {0} is not allowed.",k)})):(N(D,d,V=new $,r),n.mergePropertyMatch(V))))}if("object"==typeof t.additionalProperties){for(var T=0,C=o;T<C.length;T++)if(D=s[k=C[T]]){var V=new $;N(D,t.additionalProperties,V,r),n.mergePropertyMatch(V)}}else if(!1===t.additionalProperties&&o.length>0)for(var E=0,F=o;E<F.length;E++){var D;(D=s[k=F[E]])&&(g=D.parent,n.problems.push({location:{offset:g.keyNode.offset,length:g.keyNode.length},message:t.errorMessage||O("DisallowedExtraPropWarning","Property {0} is not allowed.",k)}))}if(S(t.maxProperties)&&e.properties.length>t.maxProperties&&n.problems.push({location:{offset:e.offset,length:e.length},message:O("MaxPropWarning","Object has more properties than limit of {0}.",t.maxProperties)}),S(t.minProperties)&&e.properties.length<t.minProperties&&n.problems.push({location:{offset:e.offset,length:e.length},message:O("MinPropWarning","Object has fewer properties than the required number of {0}",t.minProperties)}),t.dependencies)for(var R=0,W=Object.keys(t.dependencies);R<W.length;R++)if(s[Y=W[R]]){var L=t.dependencies[Y];if(Array.isArray(L))for(var U=0,_=L;U<_.length;U++){var q=_[U];s[q]?n.propertiesValueMatches++:n.problems.push({location:{offset:e.offset,length:e.length},message:O("RequiredDependentPropWarning","Object is missing property {0} required by property {1}.",q,Y)})}else(d=j(L))&&(N(e,d,V=new $,r),n.mergePropertyMatch(V))}var B=j(t.propertyNames);if(B)for(var K=0,Q=e.properties;K<Q.length;K++){var Y;(Y=Q[K].keyNode)&&N(Y,B,n,I.instance)}}(o,t,n,r);break;case"array":!function(e,t,n,r){if(Array.isArray(t.items)){for(var s=t.items,o=0;o<s.length;o++){var i=j(s[o]),a=new $;(m=e.items[o])?(N(m,i,a,r),n.mergePropertyMatch(a)):e.items.length>=s.length&&n.propertiesValueMatches++}if(e.items.length>s.length)if("object"==typeof t.additionalItems)for(var c=s.length;c<e.items.length;c++)a=new $,N(e.items[c],t.additionalItems,a,r),n.mergePropertyMatch(a);else!1===t.additionalItems&&n.problems.push({location:{offset:e.offset,length:e.length},message:O("additionalItemsWarning","Array has too many items according to schema. Expected {0} or fewer.",s.length)})}else{var l=j(t.items);if(l)for(var u=0,h=e.items;u<h.length;u++){var m;N(m=h[u],l,a=new $,r),n.mergePropertyMatch(a)}}var f=j(t.contains);if(f&&(e.items.some((function(e){var t=new $;return N(e,f,t,I.instance),!t.hasProblems()}))||n.problems.push({location:{offset:e.offset,length:e.length},message:t.errorMessage||O("requiredItemMissingWarning","Array does not contain required item.")})),S(t.minItems)&&e.items.length<t.minItems&&n.problems.push({location:{offset:e.offset,length:e.length},message:O("minItemsWarning","Array has too few items. Expected {0} or more.",t.minItems)}),S(t.maxItems)&&e.items.length>t.maxItems&&n.problems.push({location:{offset:e.offset,length:e.length},message:O("maxItemsWarning","Array has too many items. Expected {0} or fewer.",t.maxItems)}),!0===t.uniqueItems){var p=F(e);p.some((function(e,t){return t!==p.lastIndexOf(e)}))&&n.problems.push({location:{offset:e.offset,length:e.length},message:O("uniqueItemsWarning","Array has duplicate items.")})}}(o,t,n,r);break;case"string":!function(e,t,n){if(S(t.minLength)&&e.value.length<t.minLength&&n.problems.push({location:{offset:e.offset,length:e.length},message:O("minLengthWarning","String is shorter than the minimum length of {0}.",t.minLength)}),S(t.maxLength)&&e.value.length>t.maxLength&&n.problems.push({location:{offset:e.offset,length:e.length},message:O("maxLengthWarning","String is longer than the maximum length of {0}.",t.maxLength)}),"string"==typeof t.pattern&&(v(t.pattern).test(e.value)||n.problems.push({location:{offset:e.offset,length:e.length},message:t.patternErrorMessage||t.errorMessage||O("patternWarning",'String does not match the pattern of "{0}".',t.pattern)})),t.format)switch(t.format){case"uri":case"uri-reference":var r=void 0;if(e.value){var s=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/.exec(e.value);s?s[2]||"uri"!==t.format||(r=O("uriSchemeMissing","URI with a scheme is expected.")):r=O("uriMissing","URI is expected.")}else r=O("uriEmpty","URI expected.");r&&n.problems.push({location:{offset:e.offset,length:e.length},message:t.patternErrorMessage||t.errorMessage||O("uriFormatWarning","String is not a URI: {0}",r)});break;case"color-hex":case"date-time":case"date":case"time":case"email":var o=C[t.format];e.value&&o.pattern.exec(e.value)||n.problems.push({location:{offset:e.offset,length:e.length},message:t.patternErrorMessage||t.errorMessage||o.errorMessage})}}(o,t,n);break;case"number":!function(e,t,n){var r=e.value;function s(e){var t,n=/^(-?\d+)(?:\.(\d+))?(?:e([-+]\d+))?$/.exec(e.toString());return n&&{value:Number(n[1]+(n[2]||"")),multiplier:((null===(t=n[2])||void 0===t?void 0:t.length)||0)-(parseInt(n[3])||0)}}if(S(t.multipleOf)){var o=-1;if(Number.isInteger(t.multipleOf))o=r%t.multipleOf;else{var i=s(t.multipleOf),a=s(r);if(i&&a){var c=Math.pow(10,Math.abs(a.multiplier-i.multiplier));a.multiplier<i.multiplier?a.value*=c:i.value*=c,o=a.value%i.value}}0!==o&&n.problems.push({location:{offset:e.offset,length:e.length},message:O("multipleOfWarning","Value is not divisible by {0}.",t.multipleOf)})}function l(e,t){return S(t)?t:x(t)&&t?e:void 0}function u(e,t){if(!x(t)||!t)return e}var h=l(t.minimum,t.exclusiveMinimum);S(h)&&r<=h&&n.problems.push({location:{offset:e.offset,length:e.length},message:O("exclusiveMinimumWarning","Value is below the exclusive minimum of {0}.",h)});var m=l(t.maximum,t.exclusiveMaximum);S(m)&&r>=m&&n.problems.push({location:{offset:e.offset,length:e.length},message:O("exclusiveMaximumWarning","Value is above the exclusive maximum of {0}.",m)});var f=u(t.minimum,t.exclusiveMinimum);S(f)&&r<f&&n.problems.push({location:{offset:e.offset,length:e.length},message:O("minimumWarning","Value is below the minimum of {0}.",f)});var p=u(t.maximum,t.exclusiveMaximum);S(p)&&r>p&&n.problems.push({location:{offset:e.offset,length:e.length},message:O("maximumWarning","Value is above the maximum of {0}.",p)})}(o,t,n);break;case"property":return N(o.valueNode,t,n,r)}!function(){function e(e){return o.type===e||"integer"===e&&"number"===o.type&&o.isInteger}if(Array.isArray(t.type)?t.type.some(e)||n.problems.push({location:{offset:o.offset,length:o.length},message:t.errorMessage||O("typeArrayMismatchWarning","Incorrect type. Expected one of {0}.",t.type.join(", "))}):t.type&&(e(t.type)||n.problems.push({location:{offset:o.offset,length:o.length},message:t.errorMessage||O("typeMismatchWarning",'Incorrect type. Expected "{0}".',t.type)})),Array.isArray(t.allOf))for(var i=0,a=t.allOf;i<a.length;i++){var c=a[i];N(o,j(c),n,r)}var l=j(t.not);if(l){var u=new $,m=r.newSub();N(o,l,u,m),u.hasProblems()||n.problems.push({location:{offset:o.offset,length:o.length},message:O("notSchemaWarning","Matches a schema that is not allowed.")});for(var f=0,p=m.schemas;f<p.length;f++){var d=p[f];d.inverted=!d.inverted,r.add(d)}}var g=function(e,t){for(var s=[],i=void 0,a=0,c=e;a<c.length;a++){var l=j(c[a]),u=new $,h=r.newSub();if(N(o,l,u,h),u.hasProblems()||s.push(l),i)if(t||u.hasProblems()||i.validationResult.hasProblems()){var m=u.compare(i.validationResult);m>0?i={schema:l,validationResult:u,matchingSchemas:h}:0===m&&(i.matchingSchemas.merge(h),i.validationResult.mergeEnumValues(u))}else i.matchingSchemas.merge(h),i.validationResult.propertiesMatches+=u.propertiesMatches,i.validationResult.propertiesValueMatches+=u.propertiesValueMatches;else i={schema:l,validationResult:u,matchingSchemas:h}}return s.length>1&&t&&n.problems.push({location:{offset:o.offset,length:1},message:O("oneOfWarning","Matches multiple schemas when only one must validate.")}),i&&(n.merge(i.validationResult),n.propertiesMatches+=i.validationResult.propertiesMatches,n.propertiesValueMatches+=i.validationResult.propertiesValueMatches,r.merge(i.matchingSchemas)),s.length};Array.isArray(t.anyOf)&&g(t.anyOf,!1),Array.isArray(t.oneOf)&&g(t.oneOf,!0);var y,v,S,x,A,w,M=function(e){var t=new $,s=r.newSub();N(o,j(e),t,s),n.merge(t),n.propertiesMatches+=t.propertiesMatches,n.propertiesValueMatches+=t.propertiesValueMatches,r.merge(s)},P=j(t.if);if(P&&(y=P,v=j(t.then),S=j(t.else),x=j(y),A=new $,w=r.newSub(),N(o,x,A,w),r.merge(w),A.hasProblems()?S&&M(S):v&&M(v)),Array.isArray(t.enum)){for(var k=F(o),T=!1,C=0,V=t.enum;C<V.length;C++)if(b(k,V[C])){T=!0;break}n.enumValues=t.enum,n.enumValueMatch=T,T||n.problems.push({location:{offset:o.offset,length:o.length},code:s.EnumValueMismatch,message:t.errorMessage||O("enumWarning","Value is not accepted. Valid values: {0}.",t.enum.map((function(e){return JSON.stringify(e)})).join(", "))})}(function(e){return void 0!==e})(t.const)&&(b(k=F(o),t.const)?n.enumValueMatch=!0:(n.problems.push({location:{offset:o.offset,length:o.length},code:s.EnumValueMismatch,message:t.errorMessage||O("constWarning","Value must be {0}.",JSON.stringify(t.const))}),n.enumValueMatch=!1),n.enumValues=[t.const]),t.deprecationMessage&&o.parent&&n.problems.push({location:{offset:o.parent.offset,length:o.parent.length},severity:h.h_.Warning,message:t.deprecationMessage,code:s.Deprecated})}(),r.add({node:o,schema:t})}}function D(e,t){if("string"!=typeof e)throw new TypeError("Expected a string");for(var n,r=String(e),s="",o=!!t&&!!t.extended,i=!!t&&!!t.globstar,a=!1,c=t&&"string"==typeof t.flags?t.flags:"",l=0,u=r.length;l<u;l++)switch(n=r[l]){case"/":case"$":case"^":case"+":case".":case"(":case")":case"=":case"!":case"|":s+="\\"+n;break;case"?":if(o){s+=".";break}case"[":case"]":if(o){s+=n;break}case"{":if(o){a=!0,s+="(";break}case"}":if(o){a=!1,s+=")";break}case",":if(a){s+="|";break}s+="\\"+n;break;case"*":for(var h=r[l-1],m=1;"*"===r[l+1];)m++,l++;var f=r[l+1];i?!(m>1)||"/"!==h&&void 0!==h&&"{"!==h&&","!==h||"/"!==f&&void 0!==f&&","!==f&&"}"!==f?s+="([^/]*)":("/"===f?l++:"/"===h&&s.endsWith("\\/")&&(s=s.substr(0,s.length-2)),s+="((?:[^/]*(?:/|$))*)"):s+=".*";break;default:s+=n}return c&&~c.indexOf("g")||(s="^"+s+"$"),new RegExp(s,c)}!function(){function e(e,t,n){void 0===t&&(t=[]),void 0===n&&(n=[]),this.root=e,this.syntaxErrors=t,this.comments=n}e.prototype.getNodeFromOffset=function(e,t){if(void 0===t&&(t=!1),this.root)return l.SM(this.root,e,t)},e.prototype.visit=function(e){if(this.root){var t=function(n){var r=e(n),s=n.children;if(Array.isArray(s))for(var o=0;o<s.length&&r;o++)r=t(s[o]);return r};t(this.root)}},e.prototype.validate=function(e,t,n){if(void 0===n&&(n=h.h_.Warning),this.root&&t){var r=new $;return N(this.root,t,r,I.instance),r.problems.map((function(t){var r,s=h.Q6.create(e.positionAt(t.location.offset),e.positionAt(t.location.offset+t.location.length));return h.oQ.create(s,t.message,null!==(r=t.severity)&&void 0!==r?r:n,t.code)}))}},e.prototype.getMatchingSchemas=function(e,t,n){void 0===t&&(t=-1);var r=new E(t,n);return this.root&&e&&N(this.root,e,new $,r),r.schemas}}();var R=w(),W=function(){function e(e,t){this.globWrappers=[];try{for(var n=0,r=e;n<r.length;n++){var s=r[n],o="!"!==s[0];o||(s=s.substring(1)),s.length>0&&("/"===s[0]&&(s=s.substring(1)),this.globWrappers.push({regexp:D("**/"+s,{extended:!0,globstar:!0}),include:o}))}this.uris=t}catch(e){this.globWrappers.length=0,this.uris=[]}}return e.prototype.matchesPattern=function(e){for(var t=!1,n=0,r=this.globWrappers;n<r.length;n++){var s=r[n],o=s.regexp,i=s.include;o.test(e)&&(t=i)}return t},e.prototype.getURIs=function(){return this.uris},e}(),L=function(){function e(e,t,n){this.service=e,this.url=t,this.dependencies={},n&&(this.unresolvedSchema=this.service.promise.resolve(new U(n)))}return e.prototype.getUnresolvedSchema=function(){return this.unresolvedSchema||(this.unresolvedSchema=this.service.loadSchema(this.url)),this.unresolvedSchema},e.prototype.getResolvedSchema=function(){var e=this;return this.resolvedSchema||(this.resolvedSchema=this.getUnresolvedSchema().then((function(t){return e.service.resolveSchemaContent(t,e.url,e.dependencies)}))),this.resolvedSchema},e.prototype.clearSchema=function(){this.resolvedSchema=void 0,this.unresolvedSchema=void 0,this.dependencies={}},e}(),U=function(){return function(e,t){void 0===t&&(t=[]),this.schema=e,this.errors=t}}(),_=function(){function e(e,t){void 0===t&&(t=[]),this.schema=e,this.errors=t}return e.prototype.getSection=function(e){var t=this.getSectionRecursive(e,this.schema);if(t)return j(t)},e.prototype.getSectionRecursive=function(e,t){if(!t||"boolean"==typeof t||0===e.length)return t;var n=e.shift();if(t.properties&&(t.properties[n],1))return this.getSectionRecursive(e,t.properties[n]);if(t.patternProperties)for(var r=0,s=Object.keys(t.patternProperties);r<s.length;r++){var o=s[r];if(v(o).test(n))return this.getSectionRecursive(e,t.patternProperties[o])}else{if("object"==typeof t.additionalProperties)return this.getSectionRecursive(e,t.additionalProperties);if(n.match("[0-9]+"))if(Array.isArray(t.items)){var i=parseInt(n,10);if(!isNaN(i)&&t.items[i])return this.getSectionRecursive(e,t.items[i])}else if(t.items)return this.getSectionRecursive(e,t.items)}},e}(),q=function(){function e(e,t,n){this.contextService=t,this.requestService=e,this.promiseConstructor=n||Promise,this.callOnDispose=[],this.contributionSchemas={},this.contributionAssociations=[],this.schemasById={},this.filePatternAssociations=[],this.registeredSchemasIds={}}return e.prototype.getRegisteredSchemaIds=function(e){return Object.keys(this.registeredSchemasIds).filter((function(t){var n=u.r.parse(t).scheme;return"schemaservice"!==n&&(!e||e(n))}))},Object.defineProperty(e.prototype,"promise",{get:function(){return this.promiseConstructor},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){for(;this.callOnDispose.length>0;)this.callOnDispose.pop()()},e.prototype.onResourceChange=function(e){var t=this;this.cachedSchemaForResource=void 0;for(var n=!1,r=[e=K(e)],s=Object.keys(this.schemasById).map((function(e){return t.schemasById[e]}));r.length;)for(var o=r.pop(),i=0;i<s.length;i++){var a=s[i];a&&(a.url===o||a.dependencies[o])&&(a.url!==o&&r.push(a.url),a.clearSchema(),s[i]=void 0,n=!0)}return n},e.prototype.setSchemaContributions=function(e){if(e.schemas){var t=e.schemas;for(var n in t){var r=K(n);this.contributionSchemas[r]=this.addSchemaHandle(r,t[n])}}if(Array.isArray(e.schemaAssociations))for(var s=0,o=e.schemaAssociations;s<o.length;s++){var i=o[s],a=i.uris.map(K),c=this.addFilePatternAssociation(i.pattern,a);this.contributionAssociations.push(c)}},e.prototype.addSchemaHandle=function(e,t){var n=new L(this,e,t);return this.schemasById[e]=n,n},e.prototype.getOrAddSchemaHandle=function(e,t){return this.schemasById[e]||this.addSchemaHandle(e,t)},e.prototype.addFilePatternAssociation=function(e,t){var n=new W(e,t);return this.filePatternAssociations.push(n),n},e.prototype.registerExternalSchema=function(e,t,n){var r=K(e);return this.registeredSchemasIds[r]=!0,this.cachedSchemaForResource=void 0,t&&this.addFilePatternAssociation(t,[e]),n?this.addSchemaHandle(r,n):this.getOrAddSchemaHandle(r)},e.prototype.clearExternalSchemas=function(){for(var e in this.schemasById={},this.filePatternAssociations=[],this.registeredSchemasIds={},this.cachedSchemaForResource=void 0,this.contributionSchemas)this.schemasById[e]=this.contributionSchemas[e],this.registeredSchemasIds[e]=!0;for(var t=0,n=this.contributionAssociations;t<n.length;t++){var r=n[t];this.filePatternAssociations.push(r)}},e.prototype.getResolvedSchema=function(e){var t=K(e),n=this.schemasById[t];return n?n.getResolvedSchema():this.promise.resolve(void 0)},e.prototype.loadSchema=function(e){if(!this.requestService){var t=R("json.schema.norequestservice","Unable to load schema from '{0}'. No schema request service available",Q(e));return this.promise.resolve(new U({},[t]))}return this.requestService(e).then((function(t){if(!t){var n=R("json.schema.nocontent","Unable to load schema from '{0}': No content.",Q(e));return new U({},[n])}var r,s=[];r=l.qg(t,s);var o=s.length?[R("json.schema.invalidFormat","Unable to parse content from '{0}': Parse error at offset {1}.",Q(e),s[0].offset)]:[];return new U(r,o)}),(function(t){var n=t.toString(),r=t.toString().split("Error: ");return r.length>1&&(n=r[1]),y(n,".")&&(n=n.substr(0,n.length-1)),new U({},[R("json.schema.nocontent","Unable to load schema from '{0}': {1}.",Q(e),n)])}))},e.prototype.resolveSchemaContent=function(e,t,n){var r=this,s=e.errors.slice(0),o=e.schema;if(o.$schema){var i=K(o.$schema);if("http://json-schema.org/draft-03/schema"===i)return this.promise.resolve(new _({},[R("json.schema.draft03.notsupported","Draft-03 schemas are not supported.")]));"https://json-schema.org/draft/2019-09/schema"===i&&s.push(R("json.schema.draft201909.notsupported","Draft 2019-09 schemas are not yet fully supported."))}var a=this.contextService,c=function(e,t,n,r){var o=r?decodeURIComponent(r):void 0,i=function(e,t){if(!t)return e;var n=e;return"/"===t[0]&&(t=t.substr(1)),t.split("/").some((function(e){return e=e.replace(/~1/g,"/").replace(/~0/g,"~"),!(n=n[e])})),n}(t,o);if(i)for(var a in i)i.hasOwnProperty(a)&&!e.hasOwnProperty(a)&&(e[a]=i[a]);else s.push(R("json.schema.invalidref","$ref '{0}' in '{1}' can not be resolved.",o,n))},l=function(e,t,n,o,i){a&&!/^[A-Za-z][A-Za-z0-9+\-.+]*:\/\/.*/.test(t)&&(t=a.resolveRelativePath(t,o)),t=K(t);var l=r.getOrAddSchemaHandle(t);return l.getUnresolvedSchema().then((function(r){if(i[t]=!0,r.errors.length){var o=n?t+"#"+n:t;s.push(R("json.schema.problemloadingref","Problems loading reference '{0}': {1}",o,r.errors[0]))}return c(e,r.schema,t,n),u(e,r.schema,t,l.dependencies)}))},u=function(e,t,n,s){if(!e||"object"!=typeof e)return Promise.resolve(null);for(var o=[e],i=[],a=[],u=function(e){for(var r=[];e.$ref;){var i=e.$ref,u=i.split("#",2);if(delete e.$ref,u[0].length>0)return void a.push(l(e,u[0],u[1],n,s));-1===r.indexOf(i)&&(c(e,t,n,u[1]),r.push(i))}!function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,r=e;n<r.length;n++){var s=r[n];"object"==typeof s&&o.push(s)}}(e.items,e.additionalItems,e.additionalProperties,e.not,e.contains,e.propertyNames,e.if,e.then,e.else),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,r=e;n<r.length;n++){var s=r[n];if("object"==typeof s)for(var i in s){var a=s[i];"object"==typeof a&&o.push(a)}}}(e.definitions,e.properties,e.patternProperties,e.dependencies),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,r=e;n<r.length;n++){var s=r[n];if(Array.isArray(s))for(var i=0,a=s;i<a.length;i++){var c=a[i];"object"==typeof c&&o.push(c)}}}(e.anyOf,e.allOf,e.oneOf,e.items)};o.length;){var h=o.pop();i.indexOf(h)>=0||(i.push(h),u(h))}return r.promise.all(a)};return u(o,o,t,n).then((function(e){return new _(o,s)}))},e.prototype.getSchemaForResource=function(e,t){if(t&&t.root&&"object"===t.root.type){var n=t.root.properties.filter((function(e){return"$schema"===e.keyNode.value&&e.valueNode&&"string"===e.valueNode.type}));if(n.length>0){var r=n[0].valueNode;if(r&&"string"===r.type){var s=F(r);if(s&&g(s,".")&&this.contextService&&(s=this.contextService.resolveRelativePath(s,e)),s){var o=K(s);return this.getOrAddSchemaHandle(o).getResolvedSchema()}}}}if(this.cachedSchemaForResource&&this.cachedSchemaForResource.resource===e)return this.cachedSchemaForResource.resolvedSchema;for(var i=Object.create(null),a=[],c=function(e){try{return u.r.parse(e).with({fragment:null,query:null}).toString()}catch(t){return e}}(e),l=0,h=this.filePatternAssociations;l<h.length;l++){var m=h[l];if(m.matchesPattern(c))for(var f=0,p=m.getURIs();f<p.length;f++){var d=p[f];i[d]||(a.push(d),i[d]=!0)}}var y=a.length>0?this.createCombinedSchema(e,a).getResolvedSchema():this.promise.resolve(void 0);return this.cachedSchemaForResource={resource:e,resolvedSchema:y},y},e.prototype.createCombinedSchema=function(e,t){if(1===t.length)return this.getOrAddSchemaHandle(t[0]);var n="schemaservice://combinedSchema/"+encodeURIComponent(e),r={allOf:t.map((function(e){return{$ref:e}}))};return this.addSchemaHandle(n,r)},e.prototype.getMatchingSchemas=function(e,t,n){if(n){var r=n.id||"schemaservice://untitled/matchingSchemas/"+B++;return this.resolveSchemaContent(new U(n),r,{}).then((function(e){return t.getMatchingSchemas(e.schema).filter((function(e){return!e.inverted}))}))}return this.getSchemaForResource(e.uri,t).then((function(e){return e?t.getMatchingSchemas(e.schema).filter((function(e){return!e.inverted})):[]}))},e}(),B=0;function K(e){try{return u.r.parse(e).toString()}catch(t){return e}}function Q(e){try{var t=u.r.parse(e);if("file"===t.scheme)return t.fsPath}catch(e){}return e}function Y(e){try{return new RegExp(e,"u")}catch(t){return new RegExp(e)}}function H(e,t){for(let n=++t;n<e.length;n++){const r=e.charAt(n);if(" "!==r&&"\t"!==r)return t;t++}return t}function J(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(typeof e!=typeof t)return!1;if("object"!=typeof e)return!1;if(Array.isArray(e)!==Array.isArray(t))return!1;let n,r;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(!J(e[n],t[n]))return!1}else{const s=[];for(r in e)s.push(r);s.sort();const o=[];for(r in t)o.push(r);if(o.sort(),!J(s,o))return!1;for(n=0;n<s.length;n++)if(!J(e[s[n]],t[s[n]]))return!1}return!0}function z(e){return"number"==typeof e}function G(e){return void 0!==e}function X(e){return"boolean"==typeof e}function Z(e){return"string"==typeof e}function ee(e){var t;return e?e instanceof Error&&null!=(t=e.stack)?t:e.toString():"null"}function te(e){const t=e.type&&e.closestTitle;return e.title?e.title:e.$id?ne(e.$id):e.$ref||e._$ref?ne(e.$ref||e._$ref):Array.isArray(e.type)?e.type.join(" | "):t?e.type.concat("(",e.closestTitle,")"):e.type||e.closestTitle}function ne(e){const t=e.match(/^(?:.*\/)?(.*?)(?:\.schema\.json)?$/);let n=!!t&&t[1];return n||(n="typeNotFound",console.error(`$ref (${e}) not parsed properly`)),n}function re(e,t){const n=u.r.parse(t);let r=f.basename(n.fsPath);return f.extname(n.fsPath)||(r+=".json"),Object.getOwnPropertyDescriptor(e,"name")?Object.getOwnPropertyDescriptor(e,"name").value+` (${r})`:e.title?e.description?e.title+" - "+e.description+` (${r})`:e.title+` (${r})`:r}function se(e){return"object"!==e.type&&!oe(e)}function oe(e){return!!(e.anyOf||e.allOf||e.oneOf)}var ie=w(),ae=function(){function e(e,t){this.jsonSchemaService=e,this.promise=t,this.validationEnabled=!0}return e.prototype.configure=function(e){e&&(this.validationEnabled=!1!==e.validate,this.commentSeverity=e.allowComments?void 0:h.h_.Error)},e.prototype.doValidation=function(e,t,n,r){var o=this;if(!this.validationEnabled)return this.promise.resolve([]);var i=[],a={},c=function(e){var t=e.range.start.line+" "+e.range.start.character+" "+e.message;a[t]||(a[t]=!0,i.push(e))},l=function(r){var a=(null==n?void 0:n.trailingCommas)?he(n.trailingCommas):h.h_.Error,l=(null==n?void 0:n.comments)?he(n.comments):o.commentSeverity,u=(null==n?void 0:n.schemaValidation)?he(n.schemaValidation):h.h_.Warning,m=(null==n?void 0:n.schemaRequest)?he(n.schemaRequest):h.h_.Warning;if(r){if(r.errors.length&&t.root&&m){var f=t.root,p="object"===f.type?f.properties[0]:void 0;if(p&&"$schema"===p.keyNode.value){var d=p.valueNode||p,g=h.Q6.create(e.positionAt(d.offset),e.positionAt(d.offset+d.length));c(h.oQ.create(g,r.errors[0],m,s.SchemaResolveError))}else g=h.Q6.create(e.positionAt(f.offset),e.positionAt(f.offset+1)),c(h.oQ.create(g,r.errors[0],m,s.SchemaResolveError))}else if(u){var y=t.validate(e,r.schema,u);y&&y.forEach(c)}le(r.schema)&&(l=void 0),ue(r.schema)&&(a=void 0)}for(var v=0,b=t.syntaxErrors;v<b.length;v++){var S=b[v];if(S.code===s.TrailingComma){if("number"!=typeof a)continue;S.severity=a}c(S)}if("number"==typeof l){var x=ie("InvalidCommentToken","Comments are not permitted in JSON.");t.comments.forEach((function(e){c(h.oQ.create(e,x,l,s.CommentNotPermitted))}))}return i};if(r){var u=r.id||"schemaservice://untitled/"+ce++;return this.jsonSchemaService.resolveSchemaContent(new U(r),u,{}).then((function(e){return l(e)}))}return this.jsonSchemaService.getSchemaForResource(e.uri,t).then((function(e){return l(e)}))},e}(),ce=0;function le(e){if(e&&"object"==typeof e){if(x(e.allowComments))return e.allowComments;if(e.allOf)for(var t=0,n=e.allOf;t<n.length;t++){var r=le(n[t]);if(x(r))return r}}}function ue(e){if(e&&"object"==typeof e){if(x(e.allowTrailingCommas))return e.allowTrailingCommas;var t=e;if(x(t.allowsTrailingCommas))return t.allowsTrailingCommas;if(e.allOf)for(var n=0,r=e.allOf;n<r.length;n++){var s=ue(r[n]);if(x(s))return s}}}function he(e){switch(e){case"error":return h.h_.Error;case"warning":return h.h_.Warning;case"ignore":return}}var me=48,fe=57,pe=65,de=97,ge=102;function ye(e){return e<me?0:e<=fe?e-me:(e<de&&(e+=de-pe),e>=de&&e<=ge?e-de+10:0)}function ve(e){if("#"===e[0])switch(e.length){case 4:return{red:17*ye(e.charCodeAt(1))/255,green:17*ye(e.charCodeAt(2))/255,blue:17*ye(e.charCodeAt(3))/255,alpha:1};case 5:return{red:17*ye(e.charCodeAt(1))/255,green:17*ye(e.charCodeAt(2))/255,blue:17*ye(e.charCodeAt(3))/255,alpha:17*ye(e.charCodeAt(4))/255};case 7:return{red:(16*ye(e.charCodeAt(1))+ye(e.charCodeAt(2)))/255,green:(16*ye(e.charCodeAt(3))+ye(e.charCodeAt(4)))/255,blue:(16*ye(e.charCodeAt(5))+ye(e.charCodeAt(6)))/255,alpha:1};case 9:return{red:(16*ye(e.charCodeAt(1))+ye(e.charCodeAt(2)))/255,green:(16*ye(e.charCodeAt(3))+ye(e.charCodeAt(4)))/255,blue:(16*ye(e.charCodeAt(5))+ye(e.charCodeAt(6)))/255,alpha:(16*ye(e.charCodeAt(7))+ye(e.charCodeAt(8)))/255}}}var be=function(){function e(e){this.schemaService=e}return e.prototype.findDocumentSymbols=function(e,t,n){var r=this;void 0===n&&(n={resultLimit:Number.MAX_VALUE});var s=t.root;if(!s)return[];var o=n.resultLimit||Number.MAX_VALUE,i=e.uri;if(("vscode://defaultsettings/keybindings.json"===i||y(i.toLowerCase(),"/user/keybindings.json"))&&"array"===s.type){for(var a=[],c=0,l=s.items;c<l.length;c++){var u=l[c];if("object"===u.type)for(var m=0,f=u.properties;m<f.length;m++){var p=f[m];if("key"===p.keyNode.value&&p.valueNode){var d=h.aZ.create(e.uri,Se(e,u));if(a.push({name:F(p.valueNode),kind:h.v0.Function,location:d}),--o<=0)return n&&n.onResultLimitExceeded&&n.onResultLimitExceeded(i),a}}}return a}for(var g=[{node:s,containerName:""}],v=0,b=!1,S=[],x=function(t,n){"array"===t.type?t.items.forEach((function(e){e&&g.push({node:e,containerName:n})})):"object"===t.type&&t.properties.forEach((function(t){var s=t.valueNode;if(s)if(o>0){o--;var i=h.aZ.create(e.uri,Se(e,t)),a=n?n+"."+t.keyNode.value:t.keyNode.value;S.push({name:r.getKeyLabel(t),kind:r.getSymbolKind(s.type),location:i,containerName:n}),g.push({node:s,containerName:a})}else b=!0}))};v<g.length;){var A=g[v++];x(A.node,A.containerName)}return b&&n&&n.onResultLimitExceeded&&n.onResultLimitExceeded(i),S},e.prototype.findDocumentSymbols2=function(e,t,n){var r=this;void 0===n&&(n={resultLimit:Number.MAX_VALUE});var s=t.root;if(!s)return[];var o=n.resultLimit||Number.MAX_VALUE,i=e.uri;if(("vscode://defaultsettings/keybindings.json"===i||y(i.toLowerCase(),"/user/keybindings.json"))&&"array"===s.type){for(var a=[],c=0,l=s.items;c<l.length;c++){var u=l[c];if("object"===u.type)for(var m=0,f=u.properties;m<f.length;m++){var p=f[m];if("key"===p.keyNode.value&&p.valueNode){var d=Se(e,u),g=Se(e,p.keyNode);if(a.push({name:F(p.valueNode),kind:h.v0.Function,range:d,selectionRange:g}),--o<=0)return n&&n.onResultLimitExceeded&&n.onResultLimitExceeded(i),a}}}return a}for(var v=[],b=[{node:s,result:v}],S=0,x=!1,A=function(t,n){"array"===t.type?t.items.forEach((function(t,s){if(t)if(o>0){o--;var i=Se(e,t),a=i,c={name:String(s),kind:r.getSymbolKind(t.type),range:i,selectionRange:a,children:[]};n.push(c),b.push({result:c.children,node:t})}else x=!0})):"object"===t.type&&t.properties.forEach((function(t){var s=t.valueNode;if(s)if(o>0){o--;var i=Se(e,t),a=Se(e,t.keyNode),c=[],l={name:r.getKeyLabel(t),kind:r.getSymbolKind(s.type),range:i,selectionRange:a,children:c,detail:r.getDetail(s)};n.push(l),b.push({result:c,node:s})}else x=!0}))};S<b.length;){var w=b[S++];A(w.node,w.result)}return x&&n&&n.onResultLimitExceeded&&n.onResultLimitExceeded(i),v},e.prototype.getSymbolKind=function(e){switch(e){case"object":return h.v0.Module;case"string":return h.v0.String;case"number":return h.v0.Number;case"array":return h.v0.Array;case"boolean":return h.v0.Boolean;default:return h.v0.Variable}},e.prototype.getKeyLabel=function(e){var t=e.keyNode.value;return t&&(t=t.replace(/[\n]/g,"↵")),t&&t.trim()?t:'"'+t+'"'},e.prototype.getDetail=function(e){if(e)return"boolean"===e.type||"number"===e.type||"null"===e.type||"string"===e.type?String(e.value):"array"===e.type?e.children.length?void 0:"[]":"object"===e.type?e.children.length?void 0:"{}":void 0},e.prototype.findDocumentColors=function(e,t,n){return this.schemaService.getSchemaForResource(e.uri,t).then((function(r){var s=[];if(r)for(var o=n&&"number"==typeof n.resultLimit?n.resultLimit:Number.MAX_VALUE,i={},a=0,c=t.getMatchingSchemas(r.schema);a<c.length;a++){var l=c[a];if(!l.inverted&&l.schema&&("color"===l.schema.format||"color-hex"===l.schema.format)&&l.node&&"string"===l.node.type){var u=String(l.node.offset);if(!i[u]){var h=ve(F(l.node));if(h){var m=Se(e,l.node);s.push({color:h,range:m})}if(i[u]=!0,--o<=0)return n&&n.onResultLimitExceeded&&n.onResultLimitExceeded(e.uri),s}}}return s}))},e.prototype.getColorPresentations=function(e,t,n,r){var s,o=[],i=Math.round(255*n.red),a=Math.round(255*n.green),c=Math.round(255*n.blue);function l(e){var t=e.toString(16);return 2!==t.length?"0"+t:t}return s=1===n.alpha?"#"+l(i)+l(a)+l(c):"#"+l(i)+l(a)+l(c)+l(Math.round(255*n.alpha)),o.push({label:s,textEdit:h.mF.replace(r,JSON.stringify(s))}),o},e}();function Se(e,t){return h.Q6.create(e.positionAt(t.offset),e.positionAt(t.offset+t.length))}function xe(e,t){var n=[];return t.visit((function(r){var s;if("property"===r.type&&"$ref"===r.keyNode.value&&"string"===(null===(s=r.valueNode)||void 0===s?void 0:s.type)){var o=r.valueNode.value,i=function(e,t){var n=function(e){return"#"===e?[]:"#"!==e[0]||"/"!==e[1]?null:e.substring(2).split(/\//).map(Me)}(t);return n?we(n,e.root):null}(t,o);if(i){var a=e.positionAt(i.offset);n.push({target:e.uri+"#"+(a.line+1)+","+(a.character+1),range:Ae(e,r.valueNode)})}}return!0})),Promise.resolve(n)}function Ae(e,t){return h.Q6.create(e.positionAt(t.offset+1),e.positionAt(t.offset+t.length-1))}function we(e,t){if(!t)return null;if(0===e.length)return t;var n=e.shift();if(t&&"object"===t.type){var r=t.properties.find((function(e){return e.keyNode.value===n}));return r?we(e,r.valueNode):null}if(t&&"array"===t.type&&n.match(/^(0|[1-9][0-9]*)$/)){var s=Number.parseInt(n),o=t.items[s];return o?we(e,o):null}return null}function Me(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function Pe(e,t){for(const n of t.documents)if(n.internalDocument&&n.internalDocument.range[0]<=e&&n.internalDocument.range[2]>=e)return n;return 1===t.documents.length?t.documents[0]:null}function ke(e){const t=["mapping","scalar","sequence"];return e?e.filter((e=>{if("string"==typeof e){const n=e.split(" "),r=n[1]&&n[1].toLowerCase()||"scalar";return"map"!==r&&-1!==t.indexOf(r)}return!1})):[]}function Te(e,t){if(!t||!e)return!1;if(t.length!==e.length)return!1;for(let n=e.length-1;n>=0;n--)if(e[n]!==t[n])return!1;return!0}var Oe,Ce,Ve=w(),je="Property {0} is not allowed.",Ee={"color-hex":{errorMessage:Ve("colorHexFormatWarning","Invalid color format. Use #RGB, #RGBA, #RRGGBB or #RRGGBBAA."),pattern:/^#([0-9A-Fa-f]{3,4}|([0-9A-Fa-f]{2}){3,4})$/},"date-time":{errorMessage:Ve("dateTimeFormatWarning","String is not a RFC3339 date-time."),pattern:/^(\d{4})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])T([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\.[0-9]+)?(Z|(\+|-)([01][0-9]|2[0-3]):([0-5][0-9]))$/i},date:{errorMessage:Ve("dateFormatWarning","String is not a RFC3339 date."),pattern:/^(\d{4})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])$/i},time:{errorMessage:Ve("timeFormatWarning","String is not a RFC3339 time."),pattern:/^([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\.[0-9]+)?(Z|(\+|-)([01][0-9]|2[0-3]):([0-5][0-9]))$/i},email:{errorMessage:Ve("emailFormatWarning","String is not an e-mail address."),pattern:/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/},ipv4:{errorMessage:Ve("ipv4FormatWarning","String does not match IPv4 format."),pattern:/^((25[0-5]|(2[0-4]|1\d|[1-9]|)\d)\.?\b){4}$/},ipv6:{errorMessage:Ve("ipv6FormatWarning","String does not match IPv6 format."),pattern:/^([0-9a-f]|:){1,4}(:([0-9a-f]{0,4})*){1,7}$/i}},Ie="YAML",$e="yaml-schema: ";(Ce=Oe||(Oe={})).missingRequiredPropWarning="missingRequiredPropWarning",Ce.typeMismatchWarning="typeMismatchWarning",Ce.constWarning="constWarning";var Fe,Ne={[Oe.missingRequiredPropWarning]:'Missing property "{0}".',[Oe.typeMismatchWarning]:'Incorrect type. Expected "{0}".',[Oe.constWarning]:"Value must be {0}."},De=class{constructor(e,t,n,r){this.offset=n,this.length=r,this.parent=e,this.internalNode=t}getNodeFromOffsetEndInclusive(e){const t=[],n=r=>{if(e>=r.offset&&e<=r.offset+r.length){const s=r.children;for(let r=0;r<s.length&&s[r].offset<=e;r++){const e=n(s[r]);e&&t.push(e)}return r}return null},r=n(this);let s=Number.MAX_VALUE,o=null;for(const n of t){const t=n.length+n.offset-e+(e-n.offset);t<s&&(o=n,s=t)}return o||r}get children(){return[]}toString(){return"type: "+this.type+" ("+this.offset+"/"+this.length+")"+(this.parent?" parent: {"+this.parent.toString()+"}":"")}},Re=class extends De{constructor(e,t,n,r){super(e,t,n,r),this.type="null",this.value=null}},We=class extends De{constructor(e,t,n,r,s){super(e,t,r,s),this.type="boolean",this.value=n}},Le=class extends De{constructor(e,t,n,r){super(e,t,n,r),this.type="array",this.items=[]}get children(){return this.items}},Ue=class extends De{constructor(e,t,n,r){super(e,t,n,r),this.type="number",this.isInteger=!0,this.value=Number.NaN}},_e=class extends De{constructor(e,t,n,r){super(e,t,n,r),this.type="string",this.value=""}},qe=class extends De{constructor(e,t,n,r){super(e,t,n,r),this.type="property",this.colonOffset=-1}get children(){return this.valueNode?[this.keyNode,this.valueNode]:[this.keyNode]}},Be=class extends De{constructor(e,t,n,r){super(e,t,n,r),this.type="object",this.properties=[]}get children(){return this.properties}};function Ke(e){if(void 0!==e)return X(e)?e?{}:{not:{}}:("object"!=typeof e&&(console.warn(`Wrong schema: ${JSON.stringify(e)}, it MUST be an Object or Boolean`),e={type:e}),e)}!function(e){e[e.Key=0]="Key",e[e.Enum=1]="Enum"}(Fe||(Fe={}));var Qe=class e{constructor(e=-1,t=null){this.focusOffset=e,this.exclude=t,this.schemas=[]}add(e){this.schemas.push(e)}merge(e){this.schemas.push(...e.schemas)}include(e){return(-1===this.focusOffset||ze(e,this.focusOffset))&&e!==this.exclude}newSub(){return new e(-1,this.exclude)}},Ye=class{constructor(){}get schemas(){return[]}add(e){}merge(e){}include(e){return!0}newSub(){return this}};Ye.instance=new Ye;var He=class{constructor(e){this.problems=[],this.propertiesMatches=0,this.propertiesValueMatches=0,this.primaryValueMatches=0,this.enumValueMatch=!1,this.enumValues=e?[]:null}hasProblems(){return!!this.problems.length}mergeAll(e){for(const t of e)this.merge(t)}merge(e){this.problems=this.problems.concat(e.problems)}mergeEnumValues(e){if(!this.enumValueMatch&&!e.enumValueMatch&&this.enumValues&&e.enumValues){this.enumValues=this.enumValues.concat(e.enumValues);for(const e of this.problems)e.code===s.EnumValueMismatch&&(e.message=Ve("enumWarning","Value is not accepted. Valid values: {0}.",[...new Set(this.enumValues)].map((e=>JSON.stringify(e))).join(", ")))}}mergeWarningGeneric(e,t){var n,r,s;if(null==(n=this.problems)?void 0:n.length)for(const n of t){const t=this.problems.filter((e=>e.problemType===n));for(const o of t){const t=null==(r=e.problems)?void 0:r.find((e=>e.problemType===n&&o.location.offset===e.location.offset&&(n!==Oe.missingRequiredPropWarning||Te(e.problemArgs,o.problemArgs))));t&&((null==(s=t.problemArgs)?void 0:s.length)&&(t.problemArgs.filter((e=>!o.problemArgs.includes(e))).forEach((e=>o.problemArgs.push(e))),o.message=nt(o.problemType,o.problemArgs)),this.mergeSources(t,o))}}}mergePropertyMatch(e){this.merge(e),this.propertiesMatches++,(e.enumValueMatch||!e.hasProblems()&&e.propertiesMatches)&&this.propertiesValueMatches++,e.enumValueMatch&&e.enumValues&&this.primaryValueMatches++}mergeSources(e,t){const n=e.source.replace($e,"");t.source.includes(n)||(t.source=t.source+" | "+n),t.schemaUri.includes(e.schemaUri[0])||(t.schemaUri=t.schemaUri.concat(e.schemaUri))}compareGeneric(e){const t=this.hasProblems();return t!==e.hasProblems()?t?-1:1:this.enumValueMatch!==e.enumValueMatch?e.enumValueMatch?-1:1:this.propertiesValueMatches!==e.propertiesValueMatches?this.propertiesValueMatches-e.propertiesValueMatches:this.primaryValueMatches!==e.primaryValueMatches?this.primaryValueMatches-e.primaryValueMatches:this.propertiesMatches-e.propertiesMatches}compareKubernetes(e){const t=this.hasProblems();return this.propertiesMatches!==e.propertiesMatches?this.propertiesMatches-e.propertiesMatches:this.enumValueMatch!==e.enumValueMatch?e.enumValueMatch?-1:1:this.primaryValueMatches!==e.primaryValueMatches?this.primaryValueMatches-e.primaryValueMatches:this.propertiesValueMatches!==e.propertiesValueMatches?this.propertiesValueMatches-e.propertiesValueMatches:t!==e.hasProblems()?t?-1:1:this.propertiesMatches-e.propertiesMatches}};function Je(e){switch(e.type){case"array":return e.children.map(Je);case"object":{const t=Object.create(null);for(let n=0,r=e.children;n<r.length;n++){const e=r[n],s=e.children[1];s&&(t[e.children[0].value]=Je(s))}return t}case"null":case"string":case"number":case"boolean":return e.value;default:return}}function ze(e,t,n=!1){return t>=e.offset&&t<=e.offset+e.length||n&&t===e.offset+e.length}function Ge(e,t,n){if(void 0===n&&(n=!1),ze(e,t,n)){const r=e.children;if(Array.isArray(r))for(let e=0;e<r.length&&r[e].offset<=t;e++){const s=Ge(r[e],t,n);if(s)return s}return e}}var Xe=class{constructor(e,t=[],n=[]){this.root=e,this.syntaxErrors=t,this.comments=n}getNodeFromOffset(e,t=!1){if(this.root)return Ge(this.root,e,t)}getNodeFromOffsetEndInclusive(e){return this.root&&this.root.getNodeFromOffsetEndInclusive(e)}visit(e){if(this.root){const t=n=>{let r=e(n);const s=n.children;if(Array.isArray(s))for(let e=0;e<s.length&&r;e++)r=t(s[e]);return r};t(this.root)}}validate(e,t){if(this.root&&t){const n=new He(this.isKubernetes);return Ze(this.root,t,t,n,Ye.instance,{isKubernetes:this.isKubernetes,disableAdditionalProperties:this.disableAdditionalProperties,uri:this.uri}),n.problems.map((t=>{const n=h.Q6.create(e.positionAt(t.location.offset),e.positionAt(t.location.offset+t.location.length)),r=h.oQ.create(n,t.message,t.severity,t.code?t.code:s.Undefined,t.source);return r.data={schemaUri:t.schemaUri,...t.data},r}))}return null}getMatchingSchemas(e,t=-1,n=null,r){const s=new Qe(t,n);return this.root&&e&&Ze(this.root,e,e,new He(this.isKubernetes),s,{isKubernetes:this.isKubernetes,disableAdditionalProperties:this.disableAdditionalProperties,uri:this.uri,callFromAutoComplete:r}),s.schemas}};function Ze(e,t,n,r,o,i){const{isKubernetes:a,callFromAutoComplete:c}=i;if(e&&"object"==typeof t){switch(t.url||(t.url=n.url),t.closestTitle=t.title||n.closestTitle,e.type){case"object":!function(e,t,r,s){var o;const c=Object.create(null),l=[],u=[...e.properties];for(;u.length>0;){const e=u.pop(),t=e.keyNode.value;if("<<"===t&&e.valueNode)switch(e.valueNode.type){case"object":u.push(...e.valueNode.properties);break;case"array":e.valueNode.items.forEach((e=>{var t;e&&(t=e.properties,Symbol.iterator in Object(t))&&u.push(...e.properties)}))}else c[t]=e.valueNode,l.push(t)}if(Array.isArray(t.required))for(const s of t.required)if(void 0===c[s]){const o=e.parent&&"property"===e.parent.type&&e.parent.keyNode,i=o?{offset:o.offset,length:o.length}:{offset:e.offset,length:1};r.problems.push({location:i,severity:h.h_.Warning,message:nt(Oe.missingRequiredPropWarning,[s]),source:et(t,n),schemaUri:tt(t,n),problemArgs:[s],problemType:Oe.missingRequiredPropWarning})}const m=e=>{let t=l.indexOf(e);for(;t>=0;)l.splice(t,1),t=l.indexOf(e)};if(t.properties)for(const e of Object.keys(t.properties)){m(e);const l=t.properties[e],u=c[e];if(u)if(X(l))if(l)r.propertiesMatches++,r.propertiesValueMatches++;else{const s=u.parent;r.problems.push({location:{offset:s.keyNode.offset,length:s.keyNode.length},severity:h.h_.Warning,message:t.errorMessage||Ve("DisallowedExtraPropWarning",je,e),source:et(t,n),schemaUri:tt(t,n)})}else{l.url=null!=(o=t.url)?o:n.url;const e=new He(a);Ze(u,l,t,e,s,i),r.mergePropertyMatch(e),r.mergeEnumValues(e)}}if(t.patternProperties)for(const e of Object.keys(t.patternProperties)){const o=Y(e);for(const u of l.slice(0))if(o.test(u)){m(u);const o=c[u];if(o){const c=t.patternProperties[e];if(X(c))if(c)r.propertiesMatches++,r.propertiesValueMatches++;else{const e=o.parent;r.problems.push({location:{offset:e.keyNode.offset,length:e.keyNode.length},severity:h.h_.Warning,message:t.errorMessage||Ve("DisallowedExtraPropWarning",je,u),source:et(t,n),schemaUri:tt(t,n)})}else{const e=new He(a);Ze(o,c,t,e,s,i),r.mergePropertyMatch(e),r.mergeEnumValues(e)}}}}if("object"==typeof t.additionalProperties)for(const e of l){const n=c[e];if(n){const e=new He(a);Ze(n,t.additionalProperties,t,e,s,i),r.mergePropertyMatch(e),r.mergeEnumValues(e)}}else if((!1===t.additionalProperties||"object"===t.type&&void 0===t.additionalProperties&&!0===i.disableAdditionalProperties)&&l.length>0){const e=t.properties&&Object.keys(t.properties).filter((e=>!c[e]));for(const s of l){const o=c[s];if(o){let i=null;"property"!==o.type?(i=o.parent,"object"===i.type&&(i=i.properties[0])):i=o;const a={location:{offset:i.keyNode.offset,length:i.keyNode.length},severity:h.h_.Warning,message:t.errorMessage||Ve("DisallowedExtraPropWarning",je,s),source:et(t,n),schemaUri:tt(t,n)};(null==e?void 0:e.length)&&(a.data={properties:e}),r.problems.push(a)}}}if(z(t.maxProperties)&&e.properties.length>t.maxProperties&&r.problems.push({location:{offset:e.offset,length:e.length},severity:h.h_.Warning,message:Ve("MaxPropWarning","Object has more properties than limit of {0}.",t.maxProperties),source:et(t,n),schemaUri:tt(t,n)}),z(t.minProperties)&&e.properties.length<t.minProperties&&r.problems.push({location:{offset:e.offset,length:e.length},severity:h.h_.Warning,message:Ve("MinPropWarning","Object has fewer properties than the required number of {0}",t.minProperties),source:et(t,n),schemaUri:tt(t,n)}),t.dependencies)for(const o of Object.keys(t.dependencies))if(c[o]){const l=t.dependencies[o];if(Array.isArray(l))for(const s of l)c[s]?r.propertiesValueMatches++:r.problems.push({location:{offset:e.offset,length:e.length},severity:h.h_.Warning,message:Ve("RequiredDependentPropWarning","Object is missing property {0} required by property {1}.",s,o),source:et(t,n),schemaUri:tt(t,n)});else{const n=Ke(l);if(n){const o=new He(a);Ze(e,n,t,o,s,i),r.mergePropertyMatch(o),r.mergeEnumValues(o)}}}const f=Ke(t.propertyNames);if(f)for(const n of e.properties){const e=n.keyNode;e&&Ze(e,f,t,r,Ye.instance,i)}}(e,t,r,o);break;case"array":!function(e,t,r,s){if(Array.isArray(t.items)){const o=t.items;for(let n=0;n<o.length;n++){const c=Ke(o[n]),l=new He(a),u=e.items[n];u?(Ze(u,c,t,l,s,i),r.mergePropertyMatch(l),r.mergeEnumValues(l)):e.items.length>=o.length&&r.propertiesValueMatches++}if(e.items.length>o.length)if("object"==typeof t.additionalItems)for(let n=o.length;n<e.items.length;n++){const o=new He(a);Ze(e.items[n],t.additionalItems,t,o,s,i),r.mergePropertyMatch(o),r.mergeEnumValues(o)}else!1===t.additionalItems&&r.problems.push({location:{offset:e.offset,length:e.length},severity:h.h_.Warning,message:Ve("additionalItemsWarning","Array has too many items according to schema. Expected {0} or fewer.",o.length),source:et(t,n),schemaUri:tt(t,n)})}else{const n=Ke(t.items);if(n){const o=new He(a);e.items.forEach((e=>{if(n.oneOf&&1===n.oneOf.length){const a={...Ke(n.oneOf[0])};a.title=t.title,a.closestTitle=t.closestTitle,Ze(e,a,t,o,s,i),r.mergePropertyMatch(o),r.mergeEnumValues(o)}else Ze(e,n,t,o,s,i),r.mergePropertyMatch(o),r.mergeEnumValues(o)}))}}const o=Ke(t.contains);if(o&&(e.items.some((e=>{const n=new He(a);return Ze(e,o,t,n,Ye.instance,i),!n.hasProblems()}))||r.problems.push({location:{offset:e.offset,length:e.length},severity:h.h_.Warning,message:t.errorMessage||Ve("requiredItemMissingWarning","Array does not contain required item."),source:et(t,n),schemaUri:tt(t,n)})),z(t.minItems)&&e.items.length<t.minItems&&r.problems.push({location:{offset:e.offset,length:e.length},severity:h.h_.Warning,message:Ve("minItemsWarning","Array has too few items. Expected {0} or more.",t.minItems),source:et(t,n),schemaUri:tt(t,n)}),z(t.maxItems)&&e.items.length>t.maxItems&&r.problems.push({location:{offset:e.offset,length:e.length},severity:h.h_.Warning,message:Ve("maxItemsWarning","Array has too many items. Expected {0} or fewer.",t.maxItems),source:et(t,n),schemaUri:tt(t,n)}),!0===t.uniqueItems){const s=Je(e);s.some(((e,t)=>t!==s.lastIndexOf(e)))&&r.problems.push({location:{offset:e.offset,length:e.length},severity:h.h_.Warning,message:Ve("uniqueItemsWarning","Array has duplicate items."),source:et(t,n),schemaUri:tt(t,n)})}}(e,t,r,o);break;case"string":!function(e,t,r){if(z(t.minLength)&&e.value.length<t.minLength&&r.problems.push({location:{offset:e.offset,length:e.length},severity:h.h_.Warning,message:Ve("minLengthWarning","String is shorter than the minimum length of {0}.",t.minLength),source:et(t,n),schemaUri:tt(t,n)}),z(t.maxLength)&&e.value.length>t.maxLength&&r.problems.push({location:{offset:e.offset,length:e.length},severity:h.h_.Warning,message:Ve("maxLengthWarning","String is longer than the maximum length of {0}.",t.maxLength),source:et(t,n),schemaUri:tt(t,n)}),Z(t.pattern)&&(Y(t.pattern).test(e.value)||r.problems.push({location:{offset:e.offset,length:e.length},severity:h.h_.Warning,message:t.patternErrorMessage||t.errorMessage||Ve("patternWarning",'String does not match the pattern of "{0}".',t.pattern),source:et(t,n),schemaUri:tt(t,n)})),t.format)switch(t.format){case"uri":case"uri-reference":{let s;if(e.value)try{u.r.parse(e.value).scheme||"uri"!==t.format||(s=Ve("uriSchemeMissing","URI with a scheme is expected."))}catch(e){s=e.message}else s=Ve("uriEmpty","URI expected.");s&&r.problems.push({location:{offset:e.offset,length:e.length},severity:h.h_.Warning,message:t.patternErrorMessage||t.errorMessage||Ve("uriFormatWarning","String is not a URI: {0}",s),source:et(t,n),schemaUri:tt(t,n)})}break;case"color-hex":case"date-time":case"date":case"time":case"email":case"ipv4":case"ipv6":{const s=Ee[t.format];e.value&&s.pattern.test(e.value)||r.problems.push({location:{offset:e.offset,length:e.length},severity:h.h_.Warning,message:t.patternErrorMessage||t.errorMessage||s.errorMessage,source:et(t,n),schemaUri:tt(t,n)})}}}(e,t,r);break;case"number":!function(e,t,r){const s=e.value;function o(e,t){return z(t)?t:X(t)&&t?e:void 0}function i(e,t){if(!X(t)||!t)return e}z(t.multipleOf)&&s%t.multipleOf!=0&&r.problems.push({location:{offset:e.offset,length:e.length},severity:h.h_.Warning,message:Ve("multipleOfWarning","Value is not divisible by {0}.",t.multipleOf),source:et(t,n),schemaUri:tt(t,n)});const a=o(t.minimum,t.exclusiveMinimum);z(a)&&s<=a&&r.problems.push({location:{offset:e.offset,length:e.length},severity:h.h_.Warning,message:Ve("exclusiveMinimumWarning","Value is below the exclusive minimum of {0}.",a),source:et(t,n),schemaUri:tt(t,n)});const c=o(t.maximum,t.exclusiveMaximum);z(c)&&s>=c&&r.problems.push({location:{offset:e.offset,length:e.length},severity:h.h_.Warning,message:Ve("exclusiveMaximumWarning","Value is above the exclusive maximum of {0}.",c),source:et(t,n),schemaUri:tt(t,n)});const l=i(t.minimum,t.exclusiveMinimum);z(l)&&s<l&&r.problems.push({location:{offset:e.offset,length:e.length},severity:h.h_.Warning,message:Ve("minimumWarning","Value is below the minimum of {0}.",l),source:et(t,n),schemaUri:tt(t,n)});const u=i(t.maximum,t.exclusiveMaximum);z(u)&&s>u&&r.problems.push({location:{offset:e.offset,length:e.length},severity:h.h_.Warning,message:Ve("maximumWarning","Value is above the maximum of {0}.",u),source:et(t,n),schemaUri:tt(t,n)})}(e,t,r);break;case"property":return Ze(e.valueNode,t,t,r,o,i)}!function(){function u(t){return e.type===t||"integer"===t&&"number"===e.type&&e.isInteger}if(Array.isArray(t.type))t.type.some(u)||r.problems.push({location:{offset:e.offset,length:e.length},severity:h.h_.Warning,message:t.errorMessage||Ve("typeArrayMismatchWarning","Incorrect type. Expected one of {0}.",t.type.join(", ")),source:et(t,n),schemaUri:tt(t,n)});else if(t.type&&!u(t.type)){const s="object"===t.type?te(t):t.type;r.problems.push({location:{offset:e.offset,length:e.length},severity:h.h_.Warning,message:t.errorMessage||nt(Oe.typeMismatchWarning,[s]),source:et(t,n),schemaUri:tt(t,n),problemType:Oe.typeMismatchWarning,problemArgs:[s]})}if(Array.isArray(t.allOf))for(const n of t.allOf)Ze(e,Ke(n),t,r,o,i);const f=Ke(t.not);if(f){const s=new He(a),c=o.newSub();Ze(e,f,t,s,c,i),s.hasProblems()||r.problems.push({location:{offset:e.offset,length:e.length},severity:h.h_.Warning,message:Ve("notSchemaWarning","Matches a schema that is not allowed."),source:et(t,n),schemaUri:tt(t,n)});for(const e of c.schemas)e.inverted=!e.inverted,o.add(e)}const p=(s,u)=>{var f;const p=[],d=[],g=[];let y=null;for(const n of s){const r={...Ke(n)},s=new He(a),h=o.newSub();Ze(e,r,t,s,h,i),s.hasProblems()&&!c||(p.push(r),d.push(r),0===s.propertiesMatches&&g.push(r),r.format&&d.pop()),y=y?a?l(s,y,r,h):m(e,u,s,y,r,h):{schema:r,validationResult:s,matchingSchemas:h}}return d.length>1&&(d.length>1||0===g.length)&&u&&r.problems.push({location:{offset:e.offset,length:1},severity:h.h_.Warning,message:Ve("oneOfWarning","Matches multiple schemas when only one must validate."),source:et(t,n),schemaUri:tt(t,n)}),null!==y&&(r.merge(y.validationResult),r.propertiesMatches+=y.validationResult.propertiesMatches,r.propertiesValueMatches+=y.validationResult.propertiesValueMatches,r.enumValueMatch=r.enumValueMatch||y.validationResult.enumValueMatch,(null==(f=y.validationResult.enumValues)?void 0:f.length)&&(r.enumValues=(r.enumValues||[]).concat(y.validationResult.enumValues)),o.merge(y.matchingSchemas)),p.length};Array.isArray(t.anyOf)&&p(t.anyOf,!1),Array.isArray(t.oneOf)&&p(t.oneOf,!0);const d=(t,n)=>{const s=new He(a),c=o.newSub();Ze(e,Ke(t),n,s,c,i),r.merge(s),r.propertiesMatches+=s.propertiesMatches,r.propertiesValueMatches+=s.propertiesValueMatches,o.merge(c)},g=Ke(t.if);if(g&&((n,r,s,c)=>{const l=Ke(n),u=new He(a),m=o.newSub();Ze(e,l,r,u,m,i),o.merge(m);const{filePatternAssociation:f}=l;f&&(new Mt(f).matchesPattern(i.uri)||u.problems.push({location:{offset:e.offset,length:e.length},severity:h.h_.Warning,message:Ve("ifFilePatternAssociation",`filePatternAssociation '${f}' does not match with doc uri '${i.uri}'.`),source:et(t,r),schemaUri:tt(t,r)})),u.hasProblems()?c&&d(c,r):s&&d(s,r)})(g,t,Ke(t.then),Ke(t.else)),Array.isArray(t.enum)){const o=Je(e);let i=!1;for(const e of t.enum)if(J(o,e)||c&&Z(o)&&Z(e)&&o&&e.startsWith(o)){i=!0;break}r.enumValues=t.enum,r.enumValueMatch=i,i||r.problems.push({location:{offset:e.offset,length:e.length},severity:h.h_.Warning,code:s.EnumValueMismatch,message:t.errorMessage||Ve("enumWarning","Value is not accepted. Valid values: {0}.",t.enum.map((e=>JSON.stringify(e))).join(", ")),source:et(t,n),schemaUri:tt(t,n)})}if(G(t.const)){const o=Je(e);J(o,t.const)||c&&Z(o)&&Z(t.const)&&t.const.startsWith(o)?r.enumValueMatch=!0:(r.problems.push({location:{offset:e.offset,length:e.length},severity:h.h_.Warning,code:s.EnumValueMismatch,problemType:Oe.constWarning,message:t.errorMessage||nt(Oe.constWarning,[JSON.stringify(t.const)]),source:et(t,n),schemaUri:tt(t,n),problemArgs:[JSON.stringify(t.const)]}),r.enumValueMatch=!1),r.enumValues=[t.const]}t.deprecationMessage&&e.parent&&r.problems.push({location:{offset:e.parent.offset,length:e.parent.length},severity:h.h_.Warning,message:t.deprecationMessage,source:et(t,n),schemaUri:tt(t,n)})}(),o.add({node:e,schema:t})}function l(e,t,n,r){const s=e.compareKubernetes(t.validationResult);return s>0?t={schema:n,validationResult:e,matchingSchemas:r}:0===s&&(t.matchingSchemas.merge(r),t.validationResult.mergeEnumValues(e)),t}function m(e,t,n,r,s,o){if(t||n.hasProblems()||r.validationResult.hasProblems()&&!c){const i=n.compareGeneric(r.validationResult);i>0||0===i&&t&&"object"===r.schema.type&&"null"!==e.type&&e.type!==r.schema.type?r={schema:s,validationResult:n,matchingSchemas:o}:0===i&&(r.matchingSchemas.merge(o),r.validationResult.mergeEnumValues(n),r.validationResult.mergeWarningGeneric(n,[Oe.missingRequiredPropWarning,Oe.typeMismatchWarning,Oe.constWarning]))}else r.matchingSchemas.merge(o),r.validationResult.propertiesMatches+=n.propertiesMatches,r.validationResult.propertiesValueMatches+=n.propertiesValueMatches;return r}}function et(e,t){var n;if(e){let r;if(e.title)r=e.title;else if(e.closestTitle)r=e.closestTitle;else if(t.closestTitle)r=t.closestTitle;else{const s=null!=(n=e.url)?n:t.url;if(s){const e=u.r.parse(s);"file"===e.scheme&&(r=e.fsPath),r=e.toString()}}if(r)return`${$e}${r}`}return Ie}function tt(e,t){var n;const r=null!=(n=e.url)?n:t.url;return r?[r]:[]}function nt(e,t){return Ve(e,Ne[e],t.join(" | "))}var rt=0,st=new Set;function ot(e,t,n,r){if(e||(rt=0),!t)return null;if((0,m.jh)(t))return function(e,t,n,r){let s;s=e.flow&&!e.range?function(e){let t=Number.MAX_SAFE_INTEGER,n=0;for(const r of e.items)(0,m.tO)(r)&&((0,m.Ll)(r.key)&&r.key.range&&r.key.range[0]<=t&&(t=r.key.range[0]),(0,m.Ll)(r.value)&&r.value.range&&r.value.range[2]>=n&&(n=r.value.range[2]));return[t,n,n]}(e):e.range;const o=new Be(t,e,...at(s,r));for(const t of e.items)(0,m.tO)(t)&&o.properties.push(ot(o,t,n,r));return o}(t,e,n,r);if((0,m.tO)(t))return function(e,t,n,r){const s=e.key,o=e.value,i=s.range[0];let a=s.range[1],c=s.range[2];o&&(a=o.range[1],c=o.range[2]);const l=new qe(t,e,...at([i,a,c],r));if((0,m.Vj)(s)){const e=new _e(t,s,...it(s.range));e.value=s.source,l.keyNode=e}else l.keyNode=ot(l,s,n,r);return l.valueNode=ot(l,o,n,r),l}(t,e,n,r);if((0,m.oP)(t))return function(e,t,n,r){const s=new Le(t,e,...it(e.range));for(const t of e.items)if((0,m.Ll)(t)){const e=ot(s,t,n,r);e&&s.children.push(e)}return s}(t,e,n,r);if((0,m.jn)(t))return function(e,t){if(null===e.value)return new Re(t,e,...it(e.range));switch(typeof e.value){case"string":{const n=new _e(t,e,...it(e.range));return n.value=e.value,n}case"boolean":return new We(t,e,e.value,...it(e.range));case"number":{const n=new Ue(t,e,...it(e.range));return n.value=e.value,n.isInteger=Number.isInteger(n.value),n}default:{const n=new _e(t,e,...it(e.range));return n.value=e.source,n}}}(t,e);if((0,m.Vj)(t)&&!st.has(t)&&rt<1e3){st.add(t);const s=function(e,t,n,r){rt++;const s=e.resolve(n);if(s)return ot(t,s,n,r);{const n=new _e(t,e,...it(e.range));return n.value=e.source,n}}(t,e,n,r);return st.delete(t),s}}function it(e){return[e[0],e[1]-e[0]]}function at(e,t){const n=t.linePos(e[0]),r=t.linePos(e[1]),s=[e[0],e[1]-e[0]];return n.line===r.line||t.lineStarts.length===r.line&&1!==r.col||s[1]--,s}function ct(e){return void 0!==e.start}function lt(e,t,n){let r=n(t,e);if("symbol"==typeof r)return r;for(const s of["key","value"]){const o=t[s];if(o&&"items"in o){for(let t=0;t<o.items.length;++t){const r=lt(Object.freeze(e.concat([[s,t]])),o.items[t],n);if("number"==typeof r)t=r-1;else{if(r===m.YR.BREAK)return m.YR.BREAK;r===m.YR.REMOVE&&(o.items.splice(t,1),t-=1)}}"function"==typeof r&&"key"===s&&(r=r(t,e))}}const s=t.sep;if(s)for(let t=0;t<s.length;++t){const r=lt(Object.freeze(e),s[t],n);if("number"==typeof r)t=r-1;else{if(r===m.YR.BREAK)return m.YR.BREAK;r===m.YR.REMOVE&&(s.items.splice(t,1),t-=1)}}return"function"==typeof r?r(t,e):r}var ut=class e extends Xe{constructor(e){super(null,[]),this.lineCounter=e}clone(){const t=new e(this.lineCounter);return t.isKubernetes=this.isKubernetes,t.disableAdditionalProperties=this.disableAdditionalProperties,t.uri=this.uri,t.currentDocIndex=this.currentDocIndex,t._lineComments=this.lineComments.slice(),t.internalDocument=this._internalDocument.clone(),t}collectLineComments(){this._lineComments=[],this._internalDocument.commentBefore&&this._internalDocument.commentBefore.split("\n").forEach((e=>this._lineComments.push(`#${e}`))),(0,m.YR)(this.internalDocument,((e,t)=>{(null==t?void 0:t.commentBefore)&&(null==t?void 0:t.commentBefore.split("\n")).forEach((e=>this._lineComments.push(`#${e}`))),(null==t?void 0:t.comment)&&this._lineComments.push(`#${t.comment}`)})),this._internalDocument.comment&&this._lineComments.push(`#${this._internalDocument.comment}`)}updateFromInternalDocument(){this.root=ot(null,this._internalDocument.contents,this._internalDocument,this.lineCounter)}set internalDocument(e){this._internalDocument=e,this.updateFromInternalDocument()}get internalDocument(){return this._internalDocument}get lineComments(){return this._lineComments||this.collectLineComments(),this._lineComments}set lineComments(e){this._lineComments=e}get errors(){return this.internalDocument.errors.map(ft)}get warnings(){return this.internalDocument.warnings.map(ft)}getNodeFromPosition(e,t,n){const r=t.getPosition(e),s=t.getLineContent(r.line);if(0===s.trim().length)return[this.findClosestNode(e,t,n),!0];const o=s.substring(r.character).match(/^([ ]+)\n?$/),i=!!o,a=null==o?void 0:o[1].length;let c;return(0,m.YR)(this.internalDocument,((t,n)=>{if(!n)return;const r=n.range;return r?r[0]<=e&&r[1]>=e||i&&e+a===r[2]&&(0,m.jn)(n)&&null===n.value?void(c=n):m.YR.SKIP:void 0})),[c,!1]}findClosestNode(e,t,n){let r,s=this.internalDocument.range[2],o=this.internalDocument.range[0];(0,m.YR)(this.internalDocument,((t,n)=>{if(!n)return;const i=n.range;if(!i)return;const a=i[1]-e;o<=i[0]&&a<=0&&Math.abs(a)<=s&&(s=Math.abs(a),o=i[0],r=n)}));const i=t.getPosition(e),a=function(e,t){if(e.length<t)return 0;for(let n=0;n<t;n++){const t=e.charCodeAt(n);if(32!==t&&9!==t)return n}return t}(t.getLineContent(i.line),i.character);return(0,m.jn)(r)&&null===r.value||a===i.character&&(r=this.getProperParentByIndentation(a,r,t,"",n)),r}getProperParentByIndentation(e,t,n,r,s,o){if(!t)return this.internalDocument.contents;if(s=s||2,(0,m.Ll)(t)&&t.range){const i=n.getPosition(t.range[0]),a=n.getLineContent(i.line);if((r=""===r?a.trim():r).startsWith("-")&&e===s&&r===a.trim()&&(i.character+=e),i.character>e&&i.character>0){const i=this.getParent(t);if(i)return this.getProperParentByIndentation(e,i,n,r,s,o)}else{if(!(i.character<e))return t;{const e=this.getParent(t);if((0,m.tO)(e)&&(0,m.Ll)(e.value))return e.value;if((0,m.tO)(o)&&(0,m.Ll)(o.value))return o.value}}}else if((0,m.tO)(t)){o=t;const i=this.getParent(t);return this.getProperParentByIndentation(e,i,n,r,s,o)}return t}getParent(e){return function(e,t){let n;if((0,m.YR)(e,((e,r,s)=>{if(r===t)return n=s[s.length-1],m.YR.BREAK})),!(0,m.wz)(n))return n}(this.internalDocument,e)}},ht=class{constructor(e,t){this.documents=e,this.tokens=t,this.errors=[],this.warnings=[]}},mt=new class{constructor(){this.cache=new Map}getYamlDocument(e,t,n=!1){return this.ensureCache(e,null!=t?t:vt,n),this.cache.get(e.uri).document}clear(){this.cache.clear()}ensureCache(e,t,n){const r=e.uri;this.cache.has(r)||this.cache.set(r,{version:-1,document:new ht([],[]),parserOptions:vt});const s=this.cache.get(r);if(s.version!==e.version||t.customTags&&!Te(s.parserOptions.customTags,t.customTags)){let r=e.getText();n&&!/\S/.test(r)&&(r=`{${r}}`);const o=function(e,t=vt,n){var r;const s={strict:!1,customTags:gt(t.customTags),version:null!=(r=t.yamlVersion)?r:vt.yamlVersion,keepSourceTokens:!0},o=new m.Dk(s),i=new m.HN;let a=!1;if(n){const t=new yt(n),r=t.getPosition(e.length);a=0===t.getLineContent(r.line).trim().length}const c=(a?new m.iX:new m.iX(i.addNewLine)).parse(e),l=Array.from(c),u=o.compose(l,!0,e.length),h=Array.from(u,(e=>function(e,t){const n=new ut(t);return n.internalDocument=e,n}(e,i)));return new ht(h,l)}(r,t,e);s.document=o,s.version=e.version,s.parserOptions=t}}};function ft(e){return{message:e.message,location:{start:e.pos[0],end:e.pos[1],toLineEnd:!0},severity:1,code:s.Undefined}}var pt=class{constructor(e,t){this.tag=e,this.type=t}get collection(){return"mapping"===this.type?"map":"sequence"===this.type?"seq":void 0}resolve(e){return(0,m.jh)(e)&&"mapping"===this.type||(0,m.oP)(e)&&"sequence"===this.type||"string"==typeof e&&"scalar"===this.type?e:void 0}},dt=class{constructor(){this.tag="!include",this.type="scalar"}resolve(e,t){if(e&&e.length>0&&e.trim())return e;t("!include without value")}};function gt(e){const t=[],n=ke(e);for(const e of n){const n=e.split(" "),r=n[0],s=n[1]&&n[1].toLowerCase()||"scalar";t.push(new pt(r,s))}return t.push(new dt),t}var yt=class{constructor(e){this.doc=e}getLineCount(){return this.doc.lineCount}getLineLength(e){const t=this.doc.getLineOffsets();return e>=t.length?this.doc.getText().length:e<0?0:(e+1<t.length?t[e+1]:this.doc.getText().length)-t[e]}getLineContent(e){const t=this.doc.getLineOffsets();if(e>=t.length)return this.doc.getText();if(e<0)return"";const n=e+1<t.length?t[e+1]:this.doc.getText().length;return this.doc.getText().substring(t[e],n)}getLineCharCode(e,t){return this.doc.getText(h.Q6.create(e-1,t,e-1,t+1)).charCodeAt(0)}getText(e){return this.doc.getText(e)}getPosition(e){return this.doc.positionAt(e)}},vt={customTags:[],yamlVersion:"1.2"};function bt(e){const t=e.match(/^#\s+yaml-language-server\s*:/g);return null!==t&&1===t.length}var St,xt,At=w(),wt=(new class{compile(){return()=>!0}}).compile(void 0);(xt=St||(St={}))[xt.delete=0]="delete",xt[xt.add=1]="add",xt[xt.deleteAll=2]="deleteAll";var Mt=class{constructor(e){try{this.patternRegExp=new RegExp(function(e){return e.replace(/[-\\{}+?|^$.,[\]()#\s]/g,"\\$&").replace(/[*]/g,".*")}(e)+"$")}catch(e){this.patternRegExp=null}this.schemas=[]}addSchema(e){this.schemas.push(e)}matchesPattern(e){return this.patternRegExp&&this.patternRegExp.test(e)}getSchemas(){return this.schemas}},Pt=class extends q{constructor(e,t,n){super(e,t,n),this.schemaUriToNameAndDescription=new Map,this.customSchemaProvider=void 0,this.requestService=e,this.schemaPriorityMapping=new Map}registerCustomSchemaProvider(e){this.customSchemaProvider=e}getAllSchemas(){const e=[],t=new Set;for(const n of this.filePatternAssociations){const r=n.uris[0];if(t.has(r))continue;t.add(r);const s={uri:r,fromStore:!1,usedForCurrentFile:!1};if(this.schemaUriToNameAndDescription.has(r)){const{name:e,description:t,versions:n}=this.schemaUriToNameAndDescription.get(r);s.name=e,s.description=t,s.fromStore=!0,s.versions=n}e.push(s)}return e}async resolveSchemaContent(e,t,n){const r=e.errors.slice(0);let s=e.schema;const o=this.contextService;if(!wt(s)){const n=[];for(const e of wt.errors)n.push(`${e.instancePath} : ${e.message}`);r.push(`Schema '${re(e.schema,t)}' is not valid:\n${n.join("\n")}`)}const i=(e,t,n,s)=>{const o=((e,t)=>{if(!t)return e;let n=e;return"/"===t[0]&&(t=t.substr(1)),t.split("/").some((e=>(n=n[e],!n))),n})(t,s);if(o)for(const t in o)Object.prototype.hasOwnProperty.call(o,t)&&!Object.prototype.hasOwnProperty.call(e,t)&&(e[t]=o[t]);else r.push(At("json.schema.invalidref","$ref '{0}' in '{1}' can not be resolved.",s,n))},a=(e,t,n,s,a)=>{o&&!/^\w+:\/\/.*/.test(t)&&(t=o.resolveRelativePath(t,s)),t=this.normalizeId(t);const l=this.getOrAddSchemaHandle(t);return l.getUnresolvedSchema().then((s=>{if(a[t]=!0,s.errors.length){const e=n?t+"#"+n:t;r.push(At("json.schema.problemloadingref","Problems loading reference '{0}': {1}",e,s.errors[0]))}return i(e,s.schema,t,n),e.url=t,c(e,s.schema,t,l.dependencies)}))},c=async(e,t,n,r)=>{if(!e||"object"!=typeof e)return null;const o=[e],c=new Set,l=[],u=e=>{const s=new Set;for(;e.$ref;){const o=e.$ref,c=o.split("#",2);if(e._$ref=e.$ref,delete e.$ref,c[0].length>0)return void l.push(a(e,c[0],c[1],n,r));s.has(o)||(i(e,t,n,c[1]),s.add(o))}((...e)=>{for(const t of e)"object"==typeof t&&o.push(t)})(e.items,e.additionalItems,e.additionalProperties,e.not,e.contains,e.propertyNames,e.if,e.then,e.else),((...e)=>{for(const t of e)if("object"==typeof t)for(const e in t){const n=t[e];"object"==typeof n&&o.push(n)}})(e.definitions,e.properties,e.patternProperties,e.dependencies),((...e)=>{for(const t of e)if(Array.isArray(t))for(const e of t)"object"==typeof e&&o.push(e)})(e.anyOf,e.allOf,e.oneOf,e.items,e.schemaSequence)};if(n.indexOf("#")>0){const e=n.split("#",2);if(e[0].length>0&&e[1].length>0){const t={};await a(t,e[0],e[1],n,r);for(const e in s)"required"!==e&&Object.prototype.hasOwnProperty.call(s,e)&&!Object.prototype.hasOwnProperty.call(t,e)&&(t[e]=s[e]);s=t}}for(;o.length;){const e=o.pop();c.has(e)||(c.add(e),u(e))}return Promise.all(l)};return await c(s,s,t,n),new _(s,r)}getSchemaForResource(e,t){const n=n=>{const r=super.createCombinedSchema(e,n);return r.getResolvedSchema().then((e=>(e.schema&&"object"==typeof e.schema&&(e.schema.url=r.url),e.schema&&e.schema.schemaSequence&&e.schema.schemaSequence[t.currentDocIndex]?new _(e.schema.schemaSequence[t.currentDocIndex]):e)))},r=()=>{const t=Object.create(null),r=[];for(const n of this.filePatternAssociations)if(n.matchesPattern(e))for(const e of n.getURIs())t[e]||(r.push(e),t[e]=!0);if(r.length>0){const e=this.highestPrioritySchemas(r);return n(e)}return Promise.resolve(null)},s=(()=>{let n=function(e){if(e instanceof ut){const t=e.lineComments.find((e=>bt(e)));if(null!=t){const e=t.match(/\$schema=\S+/g);if(null!==e&&e.length>=1)return e.length>=2&&console.log("Several $schema attributes have been found on the yaml-language-server modeline. The first one will be picked."),e[0].substring(8)}}}(t);if(void 0!==n){if(!n.startsWith("file:")&&!n.startsWith("http")){let t="";if(n.indexOf("#")>0){const e=n.split("#",2);n=e[0],t=e[1]}if(f.isAbsolute(n))n=u.r.file(n).toString();else{const t=u.r.parse(e);n=u.r.file(f.resolve(f.parse(t.fsPath).dir,n)).toString()}t.length>0&&(n+="#"+t)}return n}})();return s?n([s]):this.customSchemaProvider?this.customSchemaProvider(e).then((e=>Array.isArray(e)?0===e.length?r():Promise.all(e.map((e=>this.resolveCustomSchema(e,t)))).then((e=>({errors:[],schema:{allOf:e.map((e=>e.schema))}})),(()=>r())):e?this.resolveCustomSchema(e,t):r())).then((e=>e),(()=>r())):r()}addSchemaPriority(e,t){let n=this.schemaPriorityMapping.get(e);n?(n=n.add(t),this.schemaPriorityMapping.set(e,n)):this.schemaPriorityMapping.set(e,(new Set).add(t))}highestPrioritySchemas(e){let t=0;const n=new Map;return e.forEach((e=>{(this.schemaPriorityMapping.get(e)||[0]).forEach((r=>{r>t&&(t=r);let s=n.get(r);s?(s=s.concat(e),n.set(r,s)):n.set(r,[e])}))})),n.get(t)||[]}async resolveCustomSchema(e,t){const n=await this.loadSchema(e),r=await this.resolveSchemaContent(n,e,[]);return r.schema&&"object"==typeof r.schema&&(r.schema.url=e),r.schema&&r.schema.schemaSequence&&r.schema.schemaSequence[t.currentDocIndex]?new _(r.schema.schemaSequence[t.currentDocIndex],r.errors):r}async saveSchema(e,t){const n=this.normalizeId(e);return this.getOrAddSchemaHandle(n,t),this.schemaPriorityMapping.set(n,(new Set).add(pn.Settings)),Promise.resolve(void 0)}async deleteSchemas(e){return e.schemas.forEach((e=>{this.deleteSchema(e)})),Promise.resolve(void 0)}async deleteSchema(e){const t=this.normalizeId(e);return this.schemasById[t]&&delete this.schemasById[t],this.schemaPriorityMapping.delete(t),Promise.resolve(void 0)}async addContent(e){const t=await this.getResolvedSchema(e.schema);if(t){const n=this.resolveJSONSchemaToSection(t.schema,e.path);"object"==typeof n&&(n[e.key]=e.content),await this.saveSchema(e.schema,t.schema)}}async deleteContent(e){const t=await this.getResolvedSchema(e.schema);if(t){const n=this.resolveJSONSchemaToSection(t.schema,e.path);"object"==typeof n&&delete n[e.key],await this.saveSchema(e.schema,t.schema)}}resolveJSONSchemaToSection(e,t){const n=t.split("/");let r=e;for(const e of n)""!==e&&(this.resolveNext(r,e),r=r[e]);return r}resolveNext(e,t){if(Array.isArray(e)&&isNaN(t))throw new Error("Expected a number after the array object");if("object"==typeof e&&"string"!=typeof t)throw new Error("Expected a string after the object")}normalizeId(e){try{return u.r.parse(e).toString()}catch(t){return e}}getOrAddSchemaHandle(e,t){return super.getOrAddSchemaHandle(e,t)}loadSchema(e){const t=this.requestService;return super.loadSchema(e).then((n=>{if(n.errors&&void 0===n.schema)return t(e).then((t=>{if(!t){const t=At("json.schema.nocontent","Unable to load schema from '{0}': No content. {1}",kt(e),n.errors);return new U({},[t])}try{const e=(0,m.qg)(t);return new U(e,[])}catch(t){const n=At("json.schema.invalidFormat","Unable to parse content from '{0}': {1}.",kt(e),t);return new U({},[n])}}),(e=>{let t=e.toString();const n=e.toString().split("Error: ");return n.length>1&&(t=n[1]),new U({},[t])}));if(n.uri=e,this.schemaUriToNameAndDescription.has(e)){const{name:t,description:r,versions:s}=this.schemaUriToNameAndDescription.get(e);n.schema.title=null!=t?t:n.schema.title,n.schema.description=null!=r?r:n.schema.description,n.schema.versions=null!=s?s:n.schema.versions}return n}))}registerExternalSchema(e,t,n,r,s,o){return(r||s)&&this.schemaUriToNameAndDescription.set(e,{name:r,description:s,versions:o}),super.registerExternalSchema(e,t,n)}clearExternalSchemas(){super.clearExternalSchemas()}setSchemaContributions(e){super.setSchemaContributions(e)}getRegisteredSchemaIds(e){return super.getRegisteredSchemaIds(e)}getResolvedSchema(e){return super.getResolvedSchema(e)}onResourceChange(e){return super.onResourceChange(e)}};function kt(e){try{const t=u.r.parse(e);if("file"===t.scheme)return t.fsPath}catch(e){}return e}var Tt=class{constructor(e,t){this.telemetry=t,this.jsonDocumentSymbols=new be(e),this.jsonDocumentSymbols.getKeyLabel=e=>{const t=e.keyNode.internalNode;let n="";return n=(0,m.jh)(t)?"{}":(0,m.oP)(t)?"[]":t.source,n}}findDocumentSymbols(e,t={resultLimit:Number.MAX_VALUE}){var n;let r=[];try{const n=mt.getYamlDocument(e);if(!n||0===n.documents.length)return null;for(const s of n.documents)s.root&&(r=r.concat(this.jsonDocumentSymbols.findDocumentSymbols(e,s,t)))}catch(e){null==(n=this.telemetry)||n.sendError("yaml.documentSymbols.error",{error:ee(e)})}return r}findHierarchicalDocumentSymbols(e,t={resultLimit:Number.MAX_VALUE}){var n;let r=[];try{const n=mt.getYamlDocument(e);if(!n||0===n.documents.length)return null;for(const s of n.documents)s.root&&(r=r.concat(this.jsonDocumentSymbols.findDocumentSymbols2(e,s,t)))}catch(e){null==(n=this.telemetry)||n.sendError("yaml.hierarchicalDocumentSymbols.error",{error:ee(e)})}return r}};function Ot(e,t){for(const n of e)n.isKubernetes=t}var Ct=class{constructor(e,t){this.telemetry=t,this.shouldHover=!0,this.schemaService=e}configure(e){e&&(this.shouldHover=e.hover,this.indentation=e.indentation)}doHover(e,t,n=!1){var r;try{if(!this.shouldHover||!e)return Promise.resolve(void 0);const r=mt.getYamlDocument(e),s=Pe(e.offsetAt(t),r);if(null===s)return Promise.resolve(void 0);Ot(r.documents,n);const o=r.documents.indexOf(s);return s.currentDocIndex=o,this.getHover(e,t,s)}catch(e){null==(r=this.telemetry)||r.sendError("yaml.hover.error",{error:ee(e)})}}getHover(e,t,n){const r=e.offsetAt(t);let s=n.getNodeFromOffset(r);if(!s||("object"===s.type||"array"===s.type)&&r>s.offset+1&&r<s.offset+s.length-1)return Promise.resolve(null);const o=s;if("string"===s.type){const e=s.parent;if(e&&"property"===e.type&&e.keyNode===s&&(s=e.valueNode,!s))return Promise.resolve(null)}const i=h.Q6.create(e.positionAt(o.offset),e.positionAt(o.offset+o.length)),a=e=>e.replace(/\|\|\s*$/,"");return this.schemaService.getSchemaForResource(e.uri,n).then((e=>{if(e&&s&&!e.errors.length){const r=n.getMatchingSchemas(e.schema,s.offset);let o,c,l=[];const p=[],d=[];r.every((e=>((e.node===s||"property"===s.type&&s.valueNode===e.node)&&!e.inverted&&e.schema&&(o=o||e.schema.title||e.schema.closestTitle,c=c||e.schema.markdownDescription||this.toMarkdown(e.schema.description),e.schema.enum&&(l=e.schema.markdownEnumDescriptions?e.schema.markdownEnumDescriptions:e.schema.enumDescriptions?e.schema.enumDescriptions.map(this.toMarkdown,this):[],e.schema.enum.forEach(((e,t)=>{"string"!=typeof e&&(e=JSON.stringify(e)),d.push({value:e,description:l[t]})}))),e.schema.anyOf&&function(e,t,n){let r=0;for(const s of t)e===s.node&&s.schema!==n&&n.anyOf.forEach((e=>{s.schema.title===e.title&&s.schema.description===e.description&&s.schema.properties===e.properties&&r++}));return r===n.anyOf.length}(s,r,e.schema)&&(o="",c="",e.schema.anyOf.forEach(((t,n)=>{o+=t.title||e.schema.closestTitle||"",c+=t.markdownDescription||this.toMarkdown(t.description)||"",n!==e.schema.anyOf.length-1&&(o+=" || ",c+=" || ")})),o=a(o),c=a(c)),e.schema.examples&&e.schema.examples.forEach((e=>{p.push((0,m.As)(e,null,2))}))),!0)));let g="";return o&&(g="#### "+this.toMarkdown(o)),c&&(g=Vt(g),g+=c),0!==d.length&&(g=Vt(g),g+="Allowed Values:\n\n",d.forEach((e=>{e.description?g+=`* \`${jt(e.value)}\`: ${e.description}\n`:g+=`* \`${jt(e.value)}\`\n`}))),0!==p.length&&p.forEach((e=>{g=Vt(g),g+="Example:\n\n",g+=`\`\`\`yaml\n${e}\`\`\`\n`})),g.length>0&&e.schema.url&&(g=Vt(g),g+=`Source: [${function(e){let t="JSON Schema";const n=e.url;if(n){const e=u.r.parse(n);t=f.basename(e.fsPath)}else e.title&&(t=e.title);return t}(e.schema)}](${e.schema.url})`),t=g,{contents:{kind:h.nw.Markdown,value:t},range:i}}var t;return null}))}toMarkdown(e){if(e){let t=e.replace(/([^\n\r])(\r?\n)([^\n\r])/gm,"$1\n\n$3");if(t=t.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&"),void 0!==this.indentation){const e=new RegExp(` {${this.indentation.length}}`,"g");t=t.replace(e,"&emsp;")}return t}}};function Vt(e){return 0===e.length?e:(e.endsWith("\n")||(e+="\n"),e+"\n")}function jt(e){return-1!==e.indexOf("`")?"`` "+e+" ``":e}var Et=class{validate(e,t){const n=[],r=new Set,s=new Set,o=new Map;(0,m.YR)(t.internalDocument,((e,n,i)=>{(0,m.Ll)(n)&&(((0,m.P3)(n)||(0,m.jn)(n))&&n.anchor&&(r.add(n),o.set(n,i[i.length-1])),(0,m.Vj)(n)&&s.add(n.resolve(t.internalDocument)))}));for(const t of r)if(!s.has(t)){const r=this.getAnchorNode(o.get(t),t);if(r){const t=h.Q6.create(e.positionAt(r.offset),e.positionAt(r.offset+r.source.length)),s=h.oQ.create(t,`Unused anchor "${r.source}"`,h.h_.Hint,0);s.tags=[h.uX.Unnecessary],n.push(s)}}return n}getAnchorNode(e,t){if(e&&e.srcToken){const n=e.srcToken;if(ct(n))return It(n);if(m.DB.isCollection(n))for(const e of n.items){if(t.srcToken!==e.value)continue;const n=It(e);if(n)return n}}}};function It(e){for(const t of e.start)if("anchor"===t.type)return t;if(e.sep&&Array.isArray(e.sep))for(const t of e.sep)if("anchor"===t.type)return t}var $t=class{constructor(e){this.forbidMapping="forbid"===e.flowMapping,this.forbidSequence="forbid"===e.flowSequence}validate(e,t){const n=[];return(0,m.YR)(t.internalDocument,((t,r)=>{var s,o;this.forbidMapping&&(0,m.jh)(r)&&"flow-collection"===(null==(s=r.srcToken)?void 0:s.type)&&n.push(h.oQ.create(this.getRangeOf(e,r.srcToken),"Flow style mapping is forbidden",h.h_.Error,"flowMap")),this.forbidSequence&&(0,m.oP)(r)&&"flow-collection"===(null==(o=r.srcToken)?void 0:o.type)&&n.push(h.oQ.create(this.getRangeOf(e,r.srcToken),"Flow style sequence is forbidden",h.h_.Error,"flowSeq"))})),n}getRangeOf(e,t){return h.Q6.create(e.positionAt(t.start.offset),e.positionAt(t.end.pop().offset))}},Ft=class{validate(e,t){const n=[];return(0,m.YR)(t.internalDocument,((t,r)=>{if((0,m.jh)(r))for(let t=1;t<r.items.length;t++)if(Dt(r.items[t-1],r.items[t])>0){const s=Nt(e,r.items[t-1]);n.push(h.oQ.create(s,`Wrong ordering of key "${r.items[t-1].key}" in mapping`,h.h_.Error,"mapKeyOrder"))}})),n}};function Nt(e,t){var n,r,s,o,i,a,c,l,u,m,f;const p=null!=(a=null!=(s=null==(n=null==t?void 0:t.srcToken.start[0])?void 0:n.offset)?s:null==(r=null==t?void 0:t.srcToken)?void 0:r.key.offset)?a:null==(i=null==(o=null==t?void 0:t.srcToken)?void 0:o.sep[0])?void 0:i.offset,d=(null==(c=null==t?void 0:t.srcToken)?void 0:c.value.offset)||(null==(u=null==(l=null==t?void 0:t.srcToken)?void 0:l.sep[0])?void 0:u.offset)||(null==(m=null==t?void 0:t.srcToken)?void 0:m.key.offset)||(null==(f=null==t?void 0:t.srcToken.start[t.srcToken.start.length-1])?void 0:f.offset);return h.Q6.create(e.positionAt(p),e.positionAt(d))}function Dt(e,t){const n=String(t.key);return String(e.key).localeCompare(n)}var Rt,Wt=(e,t)=>{const n=t.positionAt(e.location.start),r={start:n,end:e.location.toLineEnd?h.yX.create(n.line,new yt(t).getLineLength(n.line)):t.positionAt(e.location.end)};return h.oQ.create(r,e.message,e.severity,e.code,Ie)},Lt=class{constructor(e,t){this.telemetry=t,this.validators=[],this.MATCHES_MULTIPLE="Matches multiple schemas when only one must validate.",this.validationEnabled=!0,this.jsonValidation=new ae(e,Promise)}configure(e){this.validators=[],e&&(this.validationEnabled=e.validate,this.customTags=e.customTags,this.disableAdditionalProperties=e.disableAdditionalProperties,this.yamlVersion=e.yamlVersion,"forbid"!==e.flowMapping&&"forbid"!==e.flowSequence||this.validators.push(new $t(e)),e.keyOrdering&&this.validators.push(new Ft)),this.validators.push(new Et)}async doValidation(e,t=!1){var n;if(!this.validationEnabled)return Promise.resolve([]);const r=[];try{const n=mt.getYamlDocument(e,{customTags:this.customTags,yamlVersion:this.yamlVersion},!0);let s=0;for(const o of n.documents){o.isKubernetes=t,o.currentDocIndex=s,o.disableAdditionalProperties=this.disableAdditionalProperties,o.uri=e.uri;const n=await this.jsonValidation.doValidation(e,o),i=o;i.errors.length>0&&r.push(...i.errors),i.warnings.length>0&&r.push(...i.warnings),r.push(...n),r.push(...this.runAdditionalValidators(e,o)),s++}}catch(e){null==(n=this.telemetry)||n.sendError("yaml.validation.error",{error:ee(e)})}let s;const o=new Set,i=[];for(let n of r){if(t&&n.message===this.MATCHES_MULTIPLE)continue;if(Object.prototype.hasOwnProperty.call(n,"location")&&(n=Wt(n,e)),n.source||(n.source=Ie),s&&s.message===n.message&&s.range.end.line===n.range.start.line&&Math.abs(s.range.end.character-n.range.end.character)>=1){s.range.end=n.range.end;continue}s=n;const r=n.range.start.line+" "+n.range.start.character+" "+n.message;o.has(r)||(i.push(n),o.add(r))}return i}runAdditionalValidators(e,t){const n=[];for(const r of this.validators)n.push(...r.validate(e,t));return n}},Ut=class{constructor(){this.formatterEnabled=!0}configure(e){e&&(this.formatterEnabled=e.format)}format(e,t={}){if(!this.formatterEnabled)return[];try{const s=e.getText(),o={parser:"yaml",plugins:[r||(r=n.t(d,2))],tabWidth:t.tabWidth||t.tabSize,singleQuote:t.singleQuote,bracketSpacing:t.bracketSpacing,proseWrap:"always"===t.proseWrap?"always":"never"===t.proseWrap?"never":"preserve",printWidth:t.printWidth},i=p.format(s,o);return[h.mF.replace(h.Q6.create(h.yX.create(0,0),e.positionAt(s.length)),i)]}catch(e){return[]}}},_t=class{constructor(e){this.telemetry=e}findLinks(e){var t;try{const t=mt.getYamlDocument(e),n=[];for(const r of t.documents)n.push(xe(e,r));return Promise.all(n).then((e=>[].concat(...e)))}catch(e){null==(t=this.telemetry)||t.sendError("yaml.documentLink.error",{error:ee(e)})}}};function qt(e,t){if(!e)return;const n=[],r=mt.getYamlDocument(e);for(const t of r.documents)r.documents.length>1&&n.push(Bt(e,t.root)),t.visit((t=>{var r;if("object"===t.type&&"array"===(null==(r=t.parent)?void 0:r.type)&&n.push(Bt(e,t)),"property"===t.type&&t.valueNode)switch(t.valueNode.type){case"array":case"object":n.push(Bt(e,t));break;case"string":{const r=e.positionAt(t.offset),s=e.positionAt(t.valueNode.offset+t.valueNode.length);r.line!==s.line&&n.push(Bt(e,t));break}default:return!0}return!0}));const s=t&&t.rangeLimit;return"number"!=typeof s||n.length<=s?n:(t&&t.onRangeLimitExceeded&&t.onRangeLimitExceeded(e.uri),n.slice(0,t.rangeLimit))}function Bt(e,t){const n=e.positionAt(t.offset);let r=e.positionAt(t.offset+t.length);const s=e.getText(h.Q6.create(n,r)),o=s.length-s.trimRight().length;return o>0&&(r=e.positionAt(t.offset+t.length-o)),h.LM.create(n.line,r.line,n.character,r.character)}(Rt||(Rt={})).JUMP_TO_SCHEMA="jumpToSchema";var Kt=class{constructor(e){this.indentation=e}write(e){if("flow-collection"!==e.internalNode.srcToken.type)return null;const t=e.internalNode.srcToken,n="flow-map-start"===t.start.type?"block-map":"block-seq",r=e.parent.type,s={type:n,offset:t.offset,indent:t.indent,items:[]};for(const e of t.items)m.DB.visit(e,(({key:e,sep:t,value:o})=>{if("block-map"===n){const n=[{type:"space",indent:0,offset:e.offset,source:this.indentation}];"property"===r&&n.unshift({type:"newline",indent:0,offset:e.offset,source:"\n"}),s.items.push({start:n,key:e,sep:t,value:o})}else"block-seq"===n&&s.items.push({start:[{type:"newline",indent:0,offset:o.offset,source:"\n"},{type:"space",indent:0,offset:o.offset,source:this.indentation},{type:"seq-item-ind",indent:0,offset:o.offset,source:"-"},{type:"space",indent:0,offset:o.offset,source:" "}],value:o});if("flow-collection"===o.type)return m.YR.SKIP}));return m.DB.stringify(s)}},Qt=structuredClone,Yt=class{constructor(e){this.clientCapabilities=e,this.indentation="  "}configure(e){this.indentation=e.indentation}getCodeAction(e,t){if(!t.context.diagnostics)return;const n=[];return n.push(...this.getConvertToBooleanActions(t.context.diagnostics,e)),n.push(...this.getJumpToSchemaActions(t.context.diagnostics)),n.push(...this.getTabToSpaceConverting(t.context.diagnostics,e)),n.push(...this.getUnusedAnchorsDelete(t.context.diagnostics,e)),n.push(...this.getConvertToBlockStyleActions(t.context.diagnostics,e)),n.push(...this.getKeyOrderActions(t.context.diagnostics,e)),n}getJumpToSchemaActions(e){var t,n,r,s,o;if(null==(s=null==(r=null==(n=null==(t=this.clientCapabilities)?void 0:t.window)?void 0:n.showDocument)?void 0:r.support)||!s)return[];const i=new Map;for(const t of e){const e=(null==(o=t.data)?void 0:o.schemaUri)||[];for(const n of e)n&&(i.has(n)||i.set(n,[]),i.get(n).push(t))}const a=[];for(const e of i.keys()){const t=h.gY.create(`Jump to schema location (${f.basename(e)})`,h.uB.create("JumpToSchema",Rt.JUMP_TO_SCHEMA,e));t.diagnostics=i.get(e),a.push(t)}return a}getTabToSpaceConverting(e,t){const n=[],r=new yt(t),s=[];for(const o of e)if("Using tabs can lead to unpredictable results"===o.message){if(s.includes(o.range.start.line))continue;const e=r.getLineContent(o.range.start.line);let i=0,a="";for(let t=o.range.start.character;t<=o.range.end.character&&"\t"===e.charAt(t);t++)i++,a+=this.indentation;s.push(o.range.start.line);let c=o.range;i!==o.range.end.character-o.range.start.character&&(c=h.Q6.create(o.range.start,h.yX.create(o.range.end.line,o.range.start.character+i))),n.push(h.gY.create("Convert Tab to Spaces",Jt(t.uri,[h.mF.replace(c,a)]),h.gB.QuickFix))}if(0!==n.length){const e=[];for(let t=0;t<=r.getLineCount();t++){const n=r.getLineContent(t);let s=0,o="";for(let r=0;r<n.length;r++){const i=n.charAt(r);if(" "!==i&&"\t"!==i){0!==s&&(e.push(h.mF.replace(h.Q6.create(t,r-s,t,r),o)),s=0,o="");break}" "!==i||0===s?"\t"===i&&(o+=this.indentation,s++):(e.push(h.mF.replace(h.Q6.create(t,r-s,t,r),o)),s=0,o="")}0!==s&&e.push(h.mF.replace(h.Q6.create(t,0,t,r.getLineLength(t)),o))}e.length>0&&n.push(h.gY.create("Convert all Tabs to Spaces",Jt(t.uri,e),h.gB.QuickFix))}return n}getUnusedAnchorsDelete(e,t){const n=[],r=new yt(t);for(const s of e)if(s.message.startsWith("Unused anchor")&&s.source===Ie){const e=h.Q6.create(s.range.start,s.range.end),o=r.getText(e),i=H(r.getLineContent(e.end.line),e.end.character);e.end.character=i;const a=h.gY.create(`Delete unused anchor: ${o}`,Jt(t.uri,[h.mF.del(e)]),h.gB.QuickFix);a.diagnostics=[s],n.push(a)}return n}getConvertToBooleanActions(e,t){const n=[];for(const r of e)if('Incorrect type. Expected "boolean".'===r.message){const e=t.getText(r.range).toLocaleLowerCase();if('"true"'===e||'"false"'===e||"'true'"===e||"'false'"===e){const s=e.includes("true")?"true":"false";n.push(h.gY.create("Convert to boolean",Jt(t.uri,[h.mF.replace(r.range,s)]),h.gB.QuickFix))}}return n}getConvertToBlockStyleActions(e,t){const n=[];for(const r of e)if("flowMap"===r.code||"flowSeq"===r.code){const e=Ht(t,r);if((0,m.jh)(e.internalNode)||(0,m.oP)(e.internalNode)){const s=(0,m.jh)(e.internalNode)?"map":"sequence",o=new Kt(this.indentation);n.push(h.gY.create(`Convert to block style ${s}`,Jt(t.uri,[h.mF.replace(r.range,o.write(e))]),h.gB.QuickFix))}}return n}getKeyOrderActions(e,t){var n,r,s,o,i,a,c,l,u,f,p,d,g,y;const v=[];for(const b of e)if("mapKeyOrder"===(null==b?void 0:b.code)){let e=Ht(t,b);for(;e&&"object"!==e.type;)e=e.parent;if(e&&(0,m.jh)(e.internalNode)){const b=Qt(e.internalNode);if(!("block-map"!==b.srcToken.type&&"flow-collection"!==b.srcToken.type||"block-map"!==e.internalNode.srcToken.type&&"flow-collection"!==e.internalNode.srcToken.type)){b.srcToken.items.sort(((e,t)=>e.key&&t.key&&m.DB.isScalar(e.key)&&m.DB.isScalar(t.key)?e.key.source.localeCompare(t.key.source):!e.key&&t.key?-1:e.key&&!t.key?1:e.key||t.key?void 0:0));for(let t=0;t<b.srcToken.items.length;t++){const h=b.srcToken.items[t],v=e.internalNode.srcToken.items[t];if(h.start=v.start,"alias"===(null==(n=h.value)?void 0:n.type)||"scalar"===(null==(r=h.value)?void 0:r.type)||"single-quoted-scalar"===(null==(s=h.value)?void 0:s.type)||"double-quoted-scalar"===(null==(o=h.value)?void 0:o.type)){const e=null!=(c=null==(a=null==(i=h.value)?void 0:i.end)?void 0:a.findIndex((e=>"newline"===e.type)))?c:-1;let t=null;"block-scalar"===(null==(l=v.value)?void 0:l.type)?t=null==(f=null==(u=v.value)?void 0:u.props)?void 0:f.find((e=>"newline"===e.type)):m.DB.isScalar(v.value)&&(t=null==(d=null==(p=v.value)?void 0:p.end)?void 0:d.find((e=>"newline"===e.type))),t&&e<0&&(h.value.end=null!=(g=h.value.end)?g:[],h.value.end.push(t)),!t&&e>-1&&h.value.end.splice(e,1)}else"block-scalar"===(null==(y=h.value)?void 0:y.type)&&(h.value.props.find((e=>"newline"===e.type))||h.value.props.push({type:"newline",indent:0,offset:h.value.offset,source:"\n"}))}}const S=h.Q6.create(t.positionAt(e.offset),t.positionAt(e.offset+e.length));v.push(h.gY.create("Fix key order for this map",Jt(t.uri,[h.mF.replace(S,m.DB.stringify(b.srcToken))]),h.gB.QuickFix))}}return v}};function Ht(e,t){const n=mt.getYamlDocument(e),r=e.offsetAt(t.range.start);return Pe(r,n).getNodeFromOffset(r)}function Jt(e,t){const n={};return n[e]=t,{changes:n}}function zt(e,t){const{position:n}=t,r=new yt(e);if("\n"===t.ch){const e=r.getLineContent(n.line-1);if(e.trimRight().endsWith(":")){const s=r.getLineContent(n.line),o=s.substring(n.character,s.length),i=-1!==e.indexOf(" - ");if(0===o.trimRight().length){const r=n.character-(e.length-e.trimLeft().length);if(r===t.options.tabSize&&!i)return;const o=[];return s.length>0&&o.push(h.mF.del(h.Q6.create(n,h.yX.create(n.line,s.length-1)))),o.push(h.mF.insert(n," ".repeat(t.options.tabSize+(i?2-r:0)))),o}if(i)return[h.mF.insert(n," ".repeat(t.options.tabSize))]}if(e.trimRight().endsWith("|"))return[h.mF.insert(n," ".repeat(t.options.tabSize))];if(e.includes(" - ")&&!e.includes(": "))return[h.mF.insert(n,"- ")];if(e.includes(" - ")&&e.includes(": "))return[h.mF.insert(n,"  ")]}}function Gt(e){const t=new Map;return e?(e.url?e.url.startsWith("schemaservice://combinedSchema/")?Xt(e,t):t.set(e.url,e):Xt(e,t),t):t}function Xt(e,t){e.allOf&&Zt(e.allOf,t),e.anyOf&&Zt(e.anyOf,t),e.oneOf&&Zt(e.oneOf,t)}function Zt(e,t){for(const n of e)X(n)||!n.url||t.has(n.url)||t.set(n.url,n)}var en=class{constructor(e,t){this.schemaService=e,this.telemetry=t}async getCodeLens(e){var t;const n=[];try{const t=mt.getYamlDocument(e);let r=new Map;for(const n of t.documents){const t=await this.schemaService.getSchemaForResource(e.uri,n);(null==t?void 0:t.schema)&&(r=new Map([...Gt(null==t?void 0:t.schema),...r]))}for(const e of r){const t=h.O4.create(h.Q6.create(0,0,0,0));t.command={title:re(e[1],e[0]),command:Rt.JUMP_TO_SCHEMA,arguments:[e[0]]},n.push(t)}}catch(e){null==(t=this.telemetry)||t.sendError("yaml.codeLens.error",{error:ee(e)})}return n}resolveCodeLens(e){return e}},tn=class{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}};function nn(e,t,n,r,s){let o;for(s.spacesDiff=0,s.looksLikeAlignment=!1,o=0;o<t&&o<r&&e.charCodeAt(o)===n.charCodeAt(o);o++);let i=0,a=0;for(let n=o;n<t;n++)32===e.charCodeAt(n)?i++:a++;let c=0,l=0;for(let e=o;e<r;e++)32===n.charCodeAt(e)?c++:l++;if(i>0&&a>0)return;if(c>0&&l>0)return;const u=Math.abs(a-l),h=Math.abs(i-c);if(0===u)return s.spacesDiff=h,void(h>0&&0<=c-1&&c-1<e.length&&c<n.length&&32!==n.charCodeAt(c)&&32===e.charCodeAt(c-1)&&44===e.charCodeAt(e.length-1)&&(s.looksLikeAlignment=!0));h%u==0&&(s.spacesDiff=h/u)}function rn(e,t,n,r,s=0,o=0){if(null!==e&&"object"==typeof e){const i=0===s&&r.shouldIndentWithTab||s>0?t+r.indentation:"";if(Array.isArray(e)){if(o+=1,0===e.length)return"";let a="";for(let c=0;c<e.length;c++){let l=e[c];"object"==typeof e[c]?(Array.isArray(e[c])||(l=sn(e[c],o)),a+=rn(l,t,n,r,s+=1,o)):a+="\n"+i+"- "+n(e[c])}return a}{const o=Object.keys(e);if(0===o.length)return"";let a=0===s&&r.newLineFirst||s>0?"\n":"",c=!0;for(let l=0;l<o.length;l++){const u=o[l];if(0===s&&r.existingProps.includes(u))continue;const h="object"==typeof e[u],m=h?":":": ",f=i+(h&&/^\s|-/.test(u)?r.indentation:""),p=c?"":"\n";0===s&&c&&!r.indentFirstObject?a+=p+t+u+m+rn(e[u],f,n,r,s+1,0):a+=p+i+u+m+rn(e[u],f,n,r,s+1,0),c=!1}return a}}return n(e)}function sn(e,t){const n={};for(let r=0;r<Object.keys(e).length;r++){const s=Object.keys(e)[r];0===r?n["- ".repeat(t)+s]=e[s]:n["  ".repeat(t)+s]=e[s]}return n}var on=w(),an=/[\\]+"/g,cn=h.Io.Class,ln="__",un=class{constructor(e,t={},n,r){this.schemaService=e,this.clientCapabilities=t,this.yamlDocument=n,this.telemetry=r,this.completionEnabled=!0,this.arrayPrefixIndentation=""}configure(e){e&&(this.completionEnabled=e.completion),this.customTags=e.customTags,this.yamlVersion=e.yamlVersion,this.configuredIndentation=e.indentation,this.disableDefaultProperties=e.disableDefaultProperties,this.parentSkeletonSelectedFirst=e.parentSkeletonSelectedFirst}async doComplete(e,t,n=!1,r=!0){var s;const o=h.$e.create([],!1);if(!this.completionEnabled)return o;const i=this.yamlDocument.getYamlDocument(e,{customTags:this.customTags,yamlVersion:this.yamlVersion},!0),a=new yt(e);if(this.configuredIndentation)this.indentation=this.configuredIndentation;else{const e=function(e,t,n){const r=Math.min(e.getLineCount(),1e4);let s=0,o=0,i="",a=0;const c=[2,4,6,8,3,5,7],l=[0,0,0,0,0,0,0,0,0],u=new tn;for(let t=1;t<=r;t++){const n=e.getLineLength(t),r=e.getLineContent(t),c=n<=65536;let h=!1,m=0,f=0,p=0;for(let s=0,o=n;s<o;s++){const n=c?r.charCodeAt(s):e.getLineCharCode(t,s);if(9===n)p++;else{if(32!==n){h=!0,m=s;break}f++}}if(!h)continue;if(p>0?s++:f>1&&o++,nn(i,a,r,m,u),u.looksLikeAlignment&&2!==u.spacesDiff)continue;const d=u.spacesDiff;d<=8&&l[d]++,i=r,a=m}let h=n;s!==o&&(h=s<o);let m=2;if(h){let e=h?0:.1*r;c.forEach((t=>{const n=l[t];n>e&&(e=n,m=t)})),4===m&&l[4]>0&&l[2]>0&&l[2]>=l[4]/2&&(m=2)}return{insertSpaces:h,tabSize:m}}(a,0,!0);this.indentation=e.insertSpaces?" ".repeat(e.tabSize):"\t"}Ot(i.documents,n);for(const t of i.documents)t.uri=e.uri;const c=e.offsetAt(t),l=e.getText();if(":"===l.charAt(c-1))return Promise.resolve(o);let u=Pe(c,i);if(null===u)return Promise.resolve(o);u=u.clone();let[f,p]=u.getNodeFromPosition(c,a,this.indentation.length);const d=this.getCurrentWord(e,c);let g=a.getLineContent(t.line);const y=g.substring(t.character),v=/^[ ]+\n?$/.test(y);this.arrayPrefixIndentation="";let b=null;if(v){b=h.Q6.create(t,h.yX.create(t.line,g.length));const e=0===g.trim().length,n=g.match(/^\s*(-)\s*$/);if(f&&(0,m.jn)(f)&&!e&&!n){const e=g.substring(0,t.character),n=e.match(/^[\s-]*([^:]+)?$/)||e.match(/:[ \t]((?!:[ \t]).*)$/);(null==n?void 0:n[1])&&(b=h.Q6.create(h.yX.create(t.line,t.character-n[1].length),h.yX.create(t.line,g.length)))}}else if(f&&(0,m.jn)(f)&&"null"===f.value){const t=e.positionAt(f.range[0]);t.character+=1;const n=e.positionAt(f.range[2]);n.character+=1,b=h.Q6.create(t,n)}else if(f&&(0,m.jn)(f)&&f.value){const t=e.positionAt(f.range[0]);b=h.Q6.create(t,e.positionAt(f.range[1]))}else if(f&&(0,m.jn)(f)&&null===f.value&&"-"===d)b=h.Q6.create(t,t),this.arrayPrefixIndentation=" ";else{let n=c-d.length;n>0&&'"'===l[n-1]&&n--,b=h.Q6.create(e.positionAt(n),t)}const S={},x={add:(e,t)=>{const n=!!e.parent;let r=e.label;if(!r)return void console.warn(`Ignoring CompletionItem without label: ${JSON.stringify(e)}`);if(Z(r)||(r=String(r)),r=r.replace(/[\n]/g,"↵"),r.length>60){const e=r.substr(0,57).trim()+"...";S[e]||(r=e)}if(e.insertText.endsWith("$1")&&!n&&(e.insertText=e.insertText.substr(0,e.insertText.length-2)),b&&b.start.line===b.end.line&&(e.textEdit=h.mF.replace(b,e.insertText)),e.label=r,n)return void function(e){var t;if((null==(t=S[e.label])?void 0:t.label)===ln)return;const n=e.parent.schema,r=te(n),s=n.markdownDescription||n.description;let i=o.items.find((e=>{var t;return(null==(t=e.parent)?void 0:t.schema)===n&&e.kind===cn}));i&&i.parent.insertTexts.includes(e.insertText)||(i?i.parent.insertTexts.push(e.insertText):(i={...e,label:r,documentation:s,sortText:"_"+r,kind:cn},i.label=i.label||e.label,i.parent.insertTexts=[e.insertText],o.items.push(i)))}(e);this.arrayPrefixIndentation&&this.updateCompletionText(e,this.arrayPrefixIndentation+e.insertText);const s=S[r],i=(null==s?void 0:s.label)!==ln&&(null==s?void 0:s.insertText)!==e.insertText;if(s){if(i){const n=this.mergeSimpleInsertTexts(r,s.insertText,e.insertText,t);n?this.updateCompletionText(s,n):(S[r]=e,o.items.push(e))}}else S[r]=e,o.items.push(e);s&&!s.documentation&&e.documentation&&(s.documentation=e.documentation)},error:e=>{var t;null==(t=this.telemetry)||t.sendError("yaml.completion.error",{error:ee(e)})},log:e=>{console.log(e)},getNumberOfProposals:()=>o.items.length,result:o,proposed:S};this.customTags&&this.customTags.length>0&&this.getCustomTagValueCompletions(x),g.endsWith("\n")&&(g=g.substr(0,g.length-1));try{const n=await this.schemaService.getSchemaForResource(e.uri,u);if((!n||n.errors.length)&&0===t.line&&0===t.character&&!bt(g)){const e={kind:h.Io.Text,label:"Inline schema",insertText:"# yaml-language-server: $schema=",insertTextFormat:h.q8.PlainText};o.items.push(e)}if(bt(g)||function(e,t){let n=!1;for(const r of e){if("document"===r.type)lt([],r,(e=>{var s;if(ct(e)&&"comment"===(null==(s=e.value)?void 0:s.type)){if(r.offset<=t&&e.value.source.length+e.value.offset>=t)return n=!0,m.YR.BREAK}else if("comment"===e.type&&e.offset<=t&&e.offset+e.source.length>=t)return n=!0,m.YR.BREAK}));else if("comment"===r.type&&r.offset<=t&&r.source.length+r.offset>=t)return!0;if(n)break}return n}(i.tokens,c)){const e=g.indexOf("$schema=");return-1!==e&&e+8<=t.character&&this.schemaService.getAllSchemas().forEach((e=>{var t;const n={kind:h.Io.Constant,label:null!=(t=e.name)?t:e.uri,detail:e.description,insertText:e.uri,insertTextFormat:h.q8.PlainText,insertTextMode:h.I5.asIs};o.items.push(n)})),o}if(!n||n.errors.length)return o;let s=null;if(!f)if(!u.internalDocument.contents||(0,m.jn)(u.internalDocument.contents)){const e=u.internalDocument.createNode({});e.range=[c,c+1,c+1],u.internalDocument.contents=e,u.updateFromInternalDocument(),f=e}else f=u.findClosestNode(c,a),p=!0;const y=f;if(f)if(0===g.length)f=u.internalDocument.contents;else{const n=u.getParent(f);if(n){if((0,m.jn)(f)){if(f.value){if((0,m.tO)(n)){if(n.value===f){if(g.trim().length>0&&g.indexOf(":")<0){const e=this.createTempObjNode(d,f,u),t=u.getParent(n);if((0,m.oP)(u.internalDocument.contents)){const t=function(e,t){for(const[n,r]of e.items.entries())if(t===r)return n}(u.internalDocument.contents,n);"number"==typeof t&&(u.internalDocument.set(t,e),u.updateFromInternalDocument())}else t&&((0,m.jh)(t)||(0,m.oP)(t))?(t.set(n.key,e),u.updateFromInternalDocument()):(u.internalDocument.set(n.key,e),u.updateFromInternalDocument());s=e.items[0],f=e}else if(0===g.trim().length){const e=u.getParent(n);e&&(f=e)}}else if(n.key===f){const e=u.getParent(n);s=n,e&&(f=e)}}else if((0,m.oP)(n))if(g.trim().length>0){const e=this.createTempObjNode(d,f,u);n.delete(f),n.add(e),u.updateFromInternalDocument(),f=e}else f=n}else if(null===f.value)if((0,m.tO)(n)){if(n.key===f)f=n;else if((0,m.Ll)(n.key)&&n.key.range){const r=u.getParent(n);if(p&&r&&(0,m.jh)(r)&&function(e){if(e.items.length>1)return!1;const t=e.items[0];return(0,m.jn)(t.key)&&(0,m.jn)(t.value)&&""===t.key.value&&!t.value.value}(r))f=r;else{const o=e.positionAt(n.key.range[0]);if(t.character>o.character&&t.line!==o.line){const e=this.createTempObjNode(d,f,u);r&&((0,m.jh)(r)||(0,m.oP)(r))?(r.set(n.key,e),u.updateFromInternalDocument()):(u.internalDocument.set(n.key,e),u.updateFromInternalDocument()),s=e.items[0],f=e}else o.character===t.character&&r&&(f=r)}}}else if((0,m.oP)(n))if("-"!==g.charAt(t.character-1)){const e=this.createTempObjNode(d,f,u);n.delete(f),n.add(e),u.updateFromInternalDocument(),f=e}else if("-"===g.charAt(t.character-1)){const e=this.createTempObjNode("",f,u);n.delete(f),n.add(e),u.updateFromInternalDocument(),f=e}else f=n}else if((0,m.jh)(f)&&!p&&0===g.trim().length&&(0,m.oP)(n)){const e=a.getLineContent(t.line+1);a.getLineCount()!==t.line+1&&0!==e.trim().length||(f=n)}}else if((0,m.jn)(f)){const e=this.createTempObjNode(d,f,u);u.internalDocument.contents=e,u.updateFromInternalDocument(),s=e.items[0],f=e}else if((0,m.jh)(f))for(const e of f.items)(0,m.Ll)(e.value)&&e.value.range&&e.value.range[0]===c+1&&(f=e.value);else if((0,m.oP)(f)&&"-"!==g.charAt(t.character-1)){const e=this.createTempObjNode(d,f,u);e.items=[],u.updateFromInternalDocument();for(const t of f.items)(0,m.jh)(t)&&t.items.forEach((t=>{e.items.push(t)}));f=e}}if(f&&(0,m.jh)(f)){const e=f.items;for(const t of e)s&&s===t||(0,m.jn)(t.key)&&(S[t.key.value+""]=h.EB.create(ln));this.addPropertyCompletions(n,u,f,y,"",x,a,b,r),!n&&d.length>0&&'"'!==l.charAt(c-d.length-1)&&x.add({kind:h.Io.Property,label:d,insertText:this.getInsertTextForProperty(d,null,""),insertTextFormat:h.q8.Snippet})}const v={};this.getValueCompletions(n,u,f,c,e,x,v,r)}catch(e){null==(s=this.telemetry)||s.sendError("yaml.completion.error",{error:ee(e)})}this.finalizeParentCompletion(o);const A=o.items.filter(((e,t,n)=>t===n.findIndex((t=>t.label===e.label&&t.insertText===e.insertText&&t.kind===e.kind))));return(null==A?void 0:A.length)>0&&(o.items=A),o}updateCompletionText(e,t){e.insertText=t,e.textEdit&&(e.textEdit.newText=t)}mergeSimpleInsertTexts(e,t,n,r){const s=e=>e.includes("\n"),o=e=>{const t=e.indexOf("\n");return t>0&&0===e.substring(t,e.length).trim().length};if(s(t)||s(n))return r&&o(t)&&!o(n)&&!n.startsWith("\n")?n:void 0;const i=this.getValuesFromInsertText(t),a=this.getValuesFromInsertText(n),c=Array.prototype.concat(i,a);return c.length?1===c.length?`${e}: \${1:${c[0]}}`:`${e}: \${1|${c.join(",")}|}`:void 0}getValuesFromInsertText(e){const t=e.substring(e.indexOf(":")+1).trim();if(!t)return[];const n=t.match(/^\${1[|:]([^|]*)+\|?}$/);return n?n[1].split(","):[t]}finalizeParentCompletion(e){e.items.forEach((e=>{if("parent"in e){const t=e.parent.indent||"";let n=(e=>{let t=0;return e.map((e=>{const n=e.match(/\$([0-9]+)|\${[0-9]+:/g);if(!n)return e;const r=n.map((e=>+e.replace(/\${([0-9]+)[:|]/g,"$1").replace("$",""))).reduce(((e,t)=>t>e?t:e),0),s=e.replace(/\$([0-9]+)/g,((e,n)=>"$"+(+n+t))).replace(/\${([0-9]+)[:|]/g,((e,n)=>"${"+(+n+t)+":"));return t+=r,s}))})(e.parent.insertTexts).join(`\n${t}`);n.endsWith("$1")&&(n=n.substring(0,n.length-2)),e.insertText=this.arrayPrefixIndentation+n,e.textEdit&&(e.textEdit.newText=e.insertText);const r=n.replace(/\${[0-9]+[:|](.*)}/g,((e,t)=>t)).replace(/\$([0-9]+)/g,""),s=e.documentation?[e.documentation,"","----",""]:[];e.documentation={kind:h.nw.Markdown,value:[...s,"```yaml",t+r,"```"].join("\n")},delete e.parent}}))}createTempObjNode(e,t,n){const r={};r[e]=null;const s=n.internalDocument.createNode(r);return s.range=t.range,s.items[0].key.range=t.range,s.items[0].value.range=t.range,s}addPropertyCompletions(e,t,n,r,s,o,i,a,c){var l,u,f;const p=t.getMatchingSchemas(e.schema,-1,null,c),d=i.getText(a),g=i.getLineContent(a.start.line),y=0===g.trim().length,v=-1!==g.indexOf(":"),b=0===g.trimLeft().indexOf("-"),S=t.getParent(n),x=p.find((e=>e.node.internalNode===r&&e.schema.properties)),A=p.filter((e=>e.schema.oneOf)).map((e=>e.schema.oneOf))[0];let w=!1;(null==A?void 0:A.length)<p.length&&(null==A||A.forEach(((e,t)=>{var n,r;(null==(n=p[t])?void 0:n.schema.oneOf)||(null==(r=p[t])?void 0:r.schema.properties)!==e.properties||(w=!0)})));for(const e of p){if((e.node.internalNode===n&&!x||e.node.internalNode===r&&!v||(null==(l=e.node.parent)?void 0:l.internalNode)===r&&!v)&&!e.inverted){this.collectDefaultSnippets(e.schema,s,o,{newLineFirst:!1,indentFirstObject:!1,shouldIndentWithTab:b});const t=e.schema.properties;if(t){const c=e.schema.maxProperties;if(void 0===c||void 0===n.items||n.items.length<c||n.items.length===c&&!y)for(const c in t)if(Object.prototype.hasOwnProperty.call(t,c)){const l=t[c];if("object"==typeof l&&!l.deprecationMessage&&!l.doNotSuggest){let t,p="";if(S&&(0,m.oP)(S)&&n.items.length<=1&&!y){const e=i.getText(),t=e.lastIndexOf("-",n.range[0]-1);if(t>=0){const r=a.end.character-a.start.character;p=" "+e.slice(t+1,n.range[1]-r)}}p+=this.arrayPrefixIndentation,"array"===l.type&&(t=n.items.find((e=>(0,m.jn)(e.key)&&e.key.range&&e.key.value===c&&(0,m.jn)(e.value)&&!e.value.value&&i.getPosition(e.key.range[2]).line===a.end.line-1)))&&t&&(Array.isArray(l.items)?this.addSchemaValueCompletions(l.items[0],s,o,{},"property"):"object"==typeof l.items&&"object"===l.items.type&&this.addArrayItemValueCompletion(l.items,s,o));let g=c;c.startsWith(d)&&v||(g=this.getInsertTextForProperty(c,l,s,p+this.indentation));const b=(0,m.jn)(r)&&null===r.value||(0,m.jh)(r)&&0===r.items.length,x=(null==(u=e.schema.required)?void 0:u.length)>0;this.parentSkeletonSelectedFirst&&b&&x||o.add({kind:h.Io.Property,label:c,insertText:g,insertTextFormat:h.q8.Snippet,documentation:this.fromMarkup(l.markdownDescription)||l.description||""},w),(null==(f=e.schema.required)?void 0:f.includes(c))&&o.add({label:c,insertText:this.getInsertTextForProperty(c,l,s,p+this.indentation),insertTextFormat:h.q8.Snippet,documentation:this.fromMarkup(l.markdownDescription)||l.description||"",parent:{schema:e.schema,indent:p}})}}}if(S&&(0,m.oP)(S)&&se(e.schema)&&this.addSchemaValueCompletions(e.schema,s,o,{},"property",Array.isArray(S.items)),e.schema.propertyNames&&e.schema.additionalProperties&&"object"===e.schema.type){const t=Ke(e.schema.propertyNames),n=t.title||"property";o.add({kind:h.Io.Property,label:n,insertText:`\${1:${n}}: `,insertTextFormat:h.q8.Snippet,documentation:this.fromMarkup(t.markdownDescription)||t.description||""})}}S&&e.node.internalNode===S&&e.schema.defaultSnippets&&(1===n.items.length?this.collectDefaultSnippets(e.schema,s,o,{newLineFirst:!1,indentFirstObject:!1,shouldIndentWithTab:!0},1):this.collectDefaultSnippets(e.schema,s,o,{newLineFirst:!1,indentFirstObject:!0,shouldIndentWithTab:!1},1))}}getValueCompletions(e,t,n,r,s,o,i,a){let c=null;if(n&&(0,m.jn)(n)&&(n=t.getParent(n)),n){if((0,m.tO)(n)){const e=n.value;if(e&&e.range&&r>e.range[0]+e.range[2])return;c=(0,m.jn)(n.key)?n.key.value+"":null,n=t.getParent(n)}if(n&&(null!==c||(0,m.oP)(n))){const l="",u=t.getMatchingSchemas(e.schema,-1,null,a);for(const e of u)if(e.node.internalNode===n&&!e.inverted&&e.schema){if(e.schema.items&&(this.collectDefaultSnippets(e.schema,l,o,{newLineFirst:!1,indentFirstObject:!1,shouldIndentWithTab:!1}),(0,m.oP)(n)&&n.items))if(Array.isArray(e.schema.items)){const t=this.findItemAtOffset(n,s,r);t<e.schema.items.length&&this.addSchemaValueCompletions(e.schema.items[t],l,o,i,"value")}else"object"!=typeof e.schema.items||"object"!==e.schema.items.type&&!oe(e.schema.items)?this.addSchemaValueCompletions(e.schema.items,l,o,i,"value"):this.addSchemaValueCompletions(e.schema.items,l,o,i,"value",!0);if(e.schema.properties){const t=e.schema.properties[c];t&&this.addSchemaValueCompletions(t,l,o,i,"value")}e.schema.additionalProperties&&this.addSchemaValueCompletions(e.schema.additionalProperties,l,o,i,"value")}i.boolean&&(this.addBooleanValueCompletion(!0,l,o),this.addBooleanValueCompletion(!1,l,o)),i.null&&this.addNullValueCompletion(l,o)}}else this.addSchemaValueCompletions(e.schema,"",o,i,"value")}addArrayItemValueCompletion(e,t,n,r){const s=te(e),o=`- ${this.getInsertTextForObject(e,t).insertText.trimLeft()}`,i=s?" type `"+s+"`":"",a=e.description?" ("+e.description+")":"",c=this.getDocumentationWithMarkdownText(`Create an item of an array${i}${a}`,o);n.add({kind:this.getSuggestionKind(e.type),label:"- (array item) "+(s||r),documentation:c,insertText:o,insertTextFormat:h.q8.Snippet})}getInsertTextForProperty(e,t,n,r=this.indentation){const s=this.getInsertTextForValue(e,"","string"),o=s+":";let i,a=0;if(t){let e=Array.isArray(t.type)?t.type[0]:t.type;if(e||(t.properties?e="object":t.items?e="array":t.anyOf&&(e="anyOf")),Array.isArray(t.defaultSnippets)){if(1===t.defaultSnippets.length){const e=t.defaultSnippets[0].body;G(e)&&(i=this.getInsertTextForSnippetValue(e,"",{newLineFirst:!0,indentFirstObject:!1,shouldIndentWithTab:!1},[],1),i.startsWith(" ")||i.startsWith("\n")||(i=" "+i))}a+=t.defaultSnippets.length}if(t.enum&&(i||1!==t.enum.length||(i=" "+this.getInsertTextForGuessedValue(t.enum[0],"",e)),a+=t.enum.length),t.const&&(i||(i=this.getInsertTextForGuessedValue(t.const,"",e),i=function(e){return e.replace(/\$\{1:(.*)\}/,"$1")}(i),i=" "+i),a++),G(t.default)&&(i||(i=" "+this.getInsertTextForGuessedValue(t.default,"",e)),a++),Array.isArray(t.examples)&&t.examples.length&&(i||(i=" "+this.getInsertTextForGuessedValue(t.examples[0],"",e)),a+=t.examples.length),t.properties)return`${o}\n${this.getInsertTextForObject(t,n,r).insertText}`;if(t.items)return`${o}\n${r}- ${this.getInsertTextForArray(t.items,n,1,r).insertText}`;if(0===a)switch(e){case"boolean":case"string":case"anyOf":i=" $1";break;case"object":i=`\n${r}`;break;case"array":i=`\n${r}- `;break;case"number":case"integer":i=" ${1:0}";break;case"null":i=" ${1:null}";break;default:return s}}return(!i||a>1)&&(i=" $1"),o+i+n}getInsertTextForObject(e,t,n=this.indentation,r=1){let s="";return e.properties?(Object.keys(e.properties).forEach((o=>{const i=e.properties[o];let a=Array.isArray(i.type)?i.type[0]:i.type;if(a||(i.anyOf&&(a="anyOf"),i.properties&&(a="object"),i.items&&(a="array")),e.required&&e.required.indexOf(o)>-1)switch(a){case"boolean":case"string":case"number":case"integer":case"anyOf":{let e=i.default||i.const;e?("string"===a&&(e=mn(e)),s+=`${n}${o}: \${${r++}:${e}}\n`):s+=`${n}${o}: $${r++}\n`;break}case"array":{const e=this.getInsertTextForArray(i.items,t,r++,n),a=e.insertText.split("\n");let c=e.insertText;if(a.length>1){for(let e=1;e<a.length;e++){const t=a[e];a[e]=`  ${t}`}c=a.join("\n")}r=e.insertIndex,s+=`${n}${o}:\n${n}${this.indentation}- ${c}\n`}break;case"object":{const e=this.getInsertTextForObject(i,t,`${n}${this.indentation}`,r++);r=e.insertIndex,s+=`${n}${o}:\n${e.insertText}\n`}}else if(!this.disableDefaultProperties&&void 0!==i.default)switch(a){case"boolean":case"number":case"integer":s+=`${n}${"null"===o?this.getInsertTextForValue(o,"","string"):o}: \${${r++}:${i.default}}\n`;break;case"string":s+=`${n}${o}: \${${r++}:${mn(i.default)}}\n`}})),0===s.trim().length&&(s=`${n}$${r++}\n`),s=s.trimRight()+t,{insertText:s,insertIndex:r}):(s=`${n}$${r++}\n`,{insertText:s,insertIndex:r})}getInsertTextForArray(e,t,n=1,r=this.indentation){let s="";if(!e)return s="$"+n++,{insertText:s,insertIndex:n};let o=Array.isArray(e.type)?e.type[0]:e.type;switch(o||(e.properties&&(o="object"),e.items&&(o="array")),e.type){case"boolean":s=`\${${n++}:false}`;break;case"number":case"integer":s=`\${${n++}:0}`;break;case"string":s=`\${${n++}}`;break;case"object":{const o=this.getInsertTextForObject(e,t,`${r}  `,n++);s=o.insertText.trimLeft(),n=o.insertIndex}}return{insertText:s,insertIndex:n}}getInsertTextForGuessedValue(e,t,n){switch(typeof e){case"object":return null===e?"${1:null}"+t:this.getInsertTextForValue(e,t,n);case"string":{let r=JSON.stringify(e);return r=r.substr(1,r.length-2),r=this.getInsertTextForPlainText(r),"string"===n&&(r=mn(r)),"${1:"+r+"}"+t}case"number":case"boolean":return"${1:"+e+"}"+t}return this.getInsertTextForValue(e,t,n)}getInsertTextForPlainText(e){return e.replace(/[\\$}]/g,"\\$&")}getInsertTextForValue(e,t,n){if(null===e)return"null";switch(typeof e){case"object":{const n=this.indentation;return this.getInsertTemplateForValue(e,n,{index:1},t)}case"number":case"boolean":return this.getInsertTextForPlainText(e+t)}return"string"===(n=Array.isArray(n)?n[0]:n)&&(e=mn(e)),this.getInsertTextForPlainText(e+t)}getInsertTemplateForValue(e,t,n,r){if(Array.isArray(e)){let r="\n";for(const s of e)r+=`${t}- \${${n.index++}:${s}}\n`;return r}if("object"==typeof e){let s="\n";for(const o in e)if(Object.prototype.hasOwnProperty.call(e,o)){const i=e[o];let a;s+=`${t}\${${n.index++}:${o}}:`,a="object"==typeof i?`${this.getInsertTemplateForValue(i,t+this.indentation,n,r)}`:` \${${n.index++}:${this.getInsertTextForPlainText(i+r)}}\n`,s+=`${a}`}return s}return this.getInsertTextForPlainText(e+r)}addSchemaValueCompletions(e,t,n,r,s,o){"object"==typeof e&&(this.addEnumValueCompletions(e,t,n,o),this.addDefaultValueCompletions(e,t,n),this.collectTypes(e,r),o&&"value"===s&&!oe(e)&&this.addArrayItemValueCompletion(e,t,n),Array.isArray(e.allOf)&&e.allOf.forEach((e=>this.addSchemaValueCompletions(e,t,n,r,s,o))),Array.isArray(e.anyOf)&&e.anyOf.forEach((e=>this.addSchemaValueCompletions(e,t,n,r,s,o))),Array.isArray(e.oneOf)&&e.oneOf.forEach((e=>this.addSchemaValueCompletions(e,t,n,r,s,o))))}collectTypes(e,t){if(Array.isArray(e.enum)||G(e.const))return;const n=e.type;Array.isArray(n)?n.forEach((function(e){return t[e]=!0})):n&&(t[n]=!0)}addDefaultValueCompletions(e,t,n,r=0){let s=!1;if(G(e.default)){let o,i=e.type,a=e.default;for(let e=r;e>0;e--)a=[a],i="array";o="object"==typeof a?"Default value":a.toString().replace(an,'"'),n.add({kind:this.getSuggestionKind(i),label:o,insertText:this.getInsertTextForValue(a,t,i),insertTextFormat:h.q8.Snippet,detail:on("json.suggest.default","Default value")}),s=!0}Array.isArray(e.examples)&&e.examples.forEach((o=>{let i=e.type,a=o;for(let e=r;e>0;e--)a=[a],i="array";n.add({kind:this.getSuggestionKind(i),label:this.getLabelForValue(a),insertText:this.getInsertTextForValue(a,t,i),insertTextFormat:h.q8.Snippet}),s=!0})),this.collectDefaultSnippets(e,t,n,{newLineFirst:!0,indentFirstObject:!0,shouldIndentWithTab:!0}),s||"object"!=typeof e.items||Array.isArray(e.items)||this.addDefaultValueCompletions(e.items,t,n,r+1)}addEnumValueCompletions(e,t,n,r){if(G(e.const)&&!r&&n.add({kind:this.getSuggestionKind(e.type),label:this.getLabelForValue(e.const),insertText:this.getInsertTextForValue(e.const,t,e.type),insertTextFormat:h.q8.Snippet,documentation:this.fromMarkup(e.markdownDescription)||e.description}),Array.isArray(e.enum))for(let r=0,s=e.enum.length;r<s;r++){const s=e.enum[r];let o=this.fromMarkup(e.markdownDescription)||e.description;e.markdownEnumDescriptions&&r<e.markdownEnumDescriptions.length&&this.doesSupportMarkdown()?o=this.fromMarkup(e.markdownEnumDescriptions[r]):e.enumDescriptions&&r<e.enumDescriptions.length&&(o=e.enumDescriptions[r]),n.add({kind:this.getSuggestionKind(e.type),label:this.getLabelForValue(s),insertText:this.getInsertTextForValue(s,t,e.type),insertTextFormat:h.q8.Snippet,documentation:o})}}getLabelForValue(e){return null===e?"null":Array.isArray(e)?JSON.stringify(e):""+e}collectDefaultSnippets(e,t,n,r,s=0){if(Array.isArray(e.defaultSnippets))for(const o of e.defaultSnippets){let i,a,c=e.type,l=o.body,u=o.label;if(G(l)){const a=o.type||e.type;if(0===s&&"array"===a){const e={};Object.keys(l).forEach(((t,n)=>{0!==n||t.startsWith("-")?e[`  ${t}`]=l[t]:e[`- ${t}`]=l[t]})),l=e}const c=Object.keys(n.proposed).filter((e=>n.proposed[e].label===ln));if(i=this.getInsertTextForSnippetValue(l,t,r,c),""===i&&l)continue;u=u||this.getLabelForSnippetValue(l)}else if("string"==typeof o.bodyText){let e="",n="",r="";for(let t=s;t>0;t--)e=e+r+"[\n",n=n+"\n"+r+"]",r+=this.indentation,c="array";i=e+r+o.bodyText.split("\n").join("\n"+r)+n+t,u=u||i,a=i.replace(/[\n]/g,"")}n.add({kind:o.suggestionKind||this.getSuggestionKind(c),label:u,sortText:o.sortText||o.label,documentation:this.fromMarkup(o.markdownDescription)||o.description,insertText:i,insertTextFormat:h.q8.Snippet,filterText:a})}}getInsertTextForSnippetValue(e,t,n,r,s){return rn(e,"",(e=>{if("string"==typeof e){if("^"===e[0])return e.substr(1);if("true"===e||"false"===e)return`"${e}"`}return e}),{...n,indentation:this.indentation,existingProps:r},s)+t}addBooleanValueCompletion(e,t,n){n.add({kind:this.getSuggestionKind("boolean"),label:e?"true":"false",insertText:this.getInsertTextForValue(e,t,"boolean"),insertTextFormat:h.q8.Snippet,documentation:""})}addNullValueCompletion(e,t){t.add({kind:this.getSuggestionKind("null"),label:"null",insertText:"null"+e,insertTextFormat:h.q8.Snippet,documentation:""})}getLabelForSnippetValue(e){return JSON.stringify(e).replace(/\$\{\d+:([^}]+)\}|\$\d+/g,"$1")}getCustomTagValueCompletions(e){ke(this.customTags).forEach((t=>{const n=t.split(" ")[0];this.addCustomTagValueCompletion(e," ",n)}))}addCustomTagValueCompletion(e,t,n){e.add({kind:this.getSuggestionKind("string"),label:n,insertText:n+t,insertTextFormat:h.q8.Snippet,documentation:""})}getDocumentationWithMarkdownText(e,t){let n=e;return this.doesSupportMarkdown()&&(t=t.replace(/\${[0-9]+[:|](.*)}/g,((e,t)=>t)).replace(/\$([0-9]+)/g,""),n=this.fromMarkup(`${e}\n \`\`\`\n${t}\n\`\`\``)),n}getSuggestionKind(e){if(Array.isArray(e)){const t=e;e=t.length>0?t[0]:null}if(!e)return h.Io.Value;switch(e){case"string":default:return h.Io.Value;case"object":return h.Io.Module;case"property":return h.Io.Property}}getCurrentWord(e,t){let n=t-1;const r=e.getText();for(;n>=0&&-1===' \t\n\r\v":{[,]}'.indexOf(r.charAt(n));)n--;return r.substring(n+1,t)}fromMarkup(e){if(e&&this.doesSupportMarkdown())return{kind:h.nw.Markdown,value:e}}doesSupportMarkdown(){if(void 0===this.supportsMarkdown){const e=this.clientCapabilities.textDocument&&this.clientCapabilities.textDocument.completion;this.supportsMarkdown=e&&e.completionItem&&Array.isArray(e.completionItem.documentationFormat)&&-1!==e.completionItem.documentationFormat.indexOf(h.nw.Markdown)}return this.supportsMarkdown}findItemAtOffset(e,t,n){for(let t=e.items.length-1;t>=0;t--){const r=e.items[t];if((0,m.Ll)(r)&&r.range){if(n>r.range[1])return t;if(n>=r.range[0])return t}}return 0}},hn=/^\d+$/;function mn(e){let t;if(t="string"==typeof e?e:""+e,0===t.length)return t;if("true"===t||"false"===t||"null"===t||hn.test(t))return`"${t}"`;-1!==t.indexOf('"')&&(t=t.replace(an,'"'));let n=!isNaN(parseInt(t))||"@"===t.charAt(0);if(!n){let e=t.indexOf(":",0);for(;e>0&&e<t.length;e=t.indexOf(":",e+1)){if(e===t.length-1){n=!0;break}const r=t.charAt(e+1);if("\t"===r||" "===r){n=!0;break}}}return n&&(t=`"${t}"`),t}function fn(){}var pn,dn,gn=class{constructor(e){this.telemetry=e}getDefinition(e,t){var n;try{const n=mt.getYamlDocument(e),r=e.offsetAt(t.position),s=Pe(r,n);if(s){const[t]=s.getNodeFromPosition(r,new yt(e));if(t&&(0,m.Vj)(t)){const n=t.resolve(s.internalDocument);if(n&&n.range){const t=h.Q6.create(e.positionAt(n.range[0]),e.positionAt(n.range[2])),r=h.Q6.create(e.positionAt(n.range[0]),e.positionAt(n.range[1]));return[h.Im.create(e.uri,t,r)]}}}}catch(e){null==(n=this.telemetry)||n.sendError("yaml.definition.error",{error:ee(e)})}}};function yn(e,t){const n=mt.getYamlDocument(e);return t.map((t=>{const o=function(t){const o=e.offsetAt(t),i=[];for(const c of n.documents){let n,l;for(c.visit((e=>{const i=e.offset+e.length;if(i<o)return!0;if("\n"===s(i-1,i)&&i-1<o)return!0;let a=e.offset;if(a>o){const n=r(e,t);if(!n||n>o)return!0;a=n}return(!n||a>=n.offset)&&(n=e,l=a),!0}));n;){const t=null!=l?l:n.offset,r=n.offset+n.length,s={start:e.positionAt(t),end:e.positionAt(r)},c=(a=e.getText(s)).endsWith("\r\n")?a.substring(0,a.length-2):a.endsWith("\n")?a.substring(0,a.length-1):a,u=t+c.length;u>=o&&(s.end=e.positionAt(u));const h=(e,t)=>c.startsWith(e)&&c.endsWith(t||e);("string"===n.type&&(h("'")||h('"'))||"object"===n.type&&h("{","}")||"array"===n.type&&h("[","]"))&&i.push({start:e.positionAt(t+1),end:e.positionAt(r-1)}),i.push(s),n=n.parent,l=void 0}if(i.length>0)break}var a;return i.reverse()}(t);let i;for(const e of o)i=h.yn.create(e,i);return null!=i?i:h.yn.create({start:t,end:t})}));function r(t,n){var r;const o=e.positionAt(t.offset);if(o.line===n.line){if("array"===(null==(r=t.parent)?void 0:r.type)&&"- "===s(t.offset-2,t.offset))return t.offset-2;if("array"===t.type||"object"===t.type){const t={line:o.line,character:0};if(0===e.getText({start:t,end:o}).trim().length)return e.offsetAt(t)}}}function s(t,n){return e.getText({start:e.positionAt(t),end:e.positionAt(n)})}}async function vn(e){const t=await fetch(e);if(t.ok)return t.text();throw new Error(`Schema request failed for ${e}`)}(dn=pn||(pn={}))[dn.SchemaStore=1]="SchemaStore",dn[dn.SchemaAssociation=2]="SchemaAssociation",dn[dn.Settings=3]="Settings";var bn={send(){},sendError(e,t){console.error("monaco-yaml",e,t)},sendTrack(){}},Sn={resolveRelativePath:(e,t)=>String(new URL(e,t))};(0,a.n)(((e,{enableSchemaRequest:t,...n})=>{const r=function(e){const t=new Pt(e.schemaRequestService,e.workspaceContext),n=new un(t,e.clientCapabilities,mt,e.telemetry),r=new Ct(t,e.telemetry),s=new Tt(t,e.telemetry),o=new Lt(t,e.telemetry),i=new Ut,a=new Yt(e.clientCapabilities),c=new en(t,e.telemetry),l=new _t(e.telemetry),u=new gn(e.telemetry);return new fn(t,e.yamlSettings,e.connection),{configure:e=>{t.clearExternalSchemas(),e.schemas&&(t.schemaPriorityMapping=new Map,e.schemas.forEach((e=>{const n=e.priority?e.priority:0;t.addSchemaPriority(e.uri,n),t.registerExternalSchema(e.uri,e.fileMatch,e.schema,e.name,e.description,e.versions)}))),o.configure(e),r.configure(e),n.configure(e),i.configure(e),a.configure(e)},registerCustomSchemaProvider:e=>{t.registerCustomSchemaProvider(e)},findLinks:l.findLinks.bind(l),doComplete:n.doComplete.bind(n),doValidation:o.doValidation.bind(o),doHover:r.doHover.bind(r),findDocumentSymbols:s.findDocumentSymbols.bind(s),findDocumentSymbols2:s.findHierarchicalDocumentSymbols.bind(s),doDefinition:u.getDefinition.bind(u),resetSchema:e=>t.onResourceChange(e),doFormat:i.format.bind(i),doDocumentOnTypeFormatting:zt,addSchema:(e,n)=>t.saveSchema(e,n),deleteSchema:e=>t.deleteSchema(e),modifySchemaContent:e=>t.addContent(e),deleteSchemaContent:e=>t.deleteContent(e),deleteSchemasWhole:e=>t.deleteSchemas(e),getFoldingRanges:qt,getSelectionRanges:yn,getCodeAction:(e,t)=>a.getCodeAction(e,t),getCodeLens:e=>c.getCodeLens(e),resolveCodeLens:e=>c.resolveCodeLens(e)}}({schemaRequestService:t?vn:null,telemetry:bn,workspaceContext:Sn}),s=t=>(n,...r)=>{const s=e.getMirrorModels();for(const e of s)if(String(e.uri)===n)return t(c.V.create(n,"yaml",e.version,e.getValue()),...r)};return r.configure(n),{doValidation:s((e=>r.doValidation(e,Boolean(n.isKubernetes)))),doComplete:s(((e,t)=>r.doComplete(e,t,Boolean(n.isKubernetes)))),doDefinition:s(((e,t)=>r.doDefinition(e,{position:t,textDocument:e}))),doDocumentOnTypeFormatting:s(((e,t,n,s)=>r.doDocumentOnTypeFormatting(e,{ch:n,options:s,position:t,textDocument:e}))),doHover:s(r.doHover),format:s(r.doFormat),resetSchema:r.resetSchema,findDocumentSymbols:s(r.findDocumentSymbols2),findLinks:s(r.findLinks),getCodeAction:s(((e,t,n)=>r.getCodeAction(e,{range:t,textDocument:e,context:n}))),getFoldingRanges:s((e=>r.getFoldingRanges(e,{lineFoldingOnly:!0}))),getSelectionRanges:s(r.getSelectionRanges)}}))}},o={};function i(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={exports:{}};return s[e](n,n.exports,i),n.exports}i.m=s,i.x=()=>{var e=i.O(void 0,[148,9950],(()=>i(4190)));return i.O(e)},e=[],i.O=(t,n,r,s)=>{if(!n){var o=1/0;for(u=0;u<e.length;u++){for(var[n,r,s]=e[u],a=!0,c=0;c<n.length;c++)(!1&s||o>=s)&&Object.keys(i.O).every((e=>i.O[e](n[c])))?n.splice(c--,1):(a=!1,s<o&&(o=s));if(a){e.splice(u--,1);var l=r();void 0!==l&&(t=l)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[n,r,s]},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,i.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var s=Object.create(null);i.r(s);var o={};t=t||[null,n({}),n([]),n(n)];for(var a=2&r&&e;"object"==typeof a&&!~t.indexOf(a);a=n(a))Object.getOwnPropertyNames(a).forEach((t=>o[t]=()=>e[t]));return o.default=()=>e,i.d(s,o),s},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce(((t,n)=>(i.f[n](e,t),t)),[])),i.u=e=>({148:"d6a248fc50a287b89b86",9950:"5f70da7cac3169edff66"}[e]+".js"),i.miniCssF=e=>{},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&(!e||!/^http(s?):/.test(e));)e=n[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e})(),(()=>{var e={4190:1};i.f.i=(t,n)=>{e[t]||importScripts(i.p+i.u(t))};var t=self.webpackChunkdemo=self.webpackChunkdemo||[],n=t.push.bind(t);t.push=t=>{var[r,s,o]=t;for(var a in s)i.o(s,a)&&(i.m[a]=s[a]);for(o&&o(i);r.length;)e[r.pop()]=1;n(t)}})(),r=i.x,i.x=()=>Promise.all([i.e(148),i.e(9950)]).then(r),i.x()})();
//# sourceMappingURL=6d1941501ab8f8c042fb.js.map