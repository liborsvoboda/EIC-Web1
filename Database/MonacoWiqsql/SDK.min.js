var __assign=this&&this.__assign||Object.assign||function(e){for(var t,s=1,f=arguments.length;s<f;s++)for(var l in t=arguments[s])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e},__awaiter=this&&this.__awaiter||function(e,t,s,f){return new(s||(s=Promise))((function(l,d){function a(e){try{c(f.next(e))}catch(e){d(e)}}function u(e){try{c(f.throw(e))}catch(e){d(e)}}function c(e){e.done?l(e.value):new s((function(t){t(e.value)})).then(a,u)}c((f=f.apply(e,t||[])).next())}))},__generator=this&&this.__generator||function(e,t){function n(d){return function(p){return function(d){if(s)throw new TypeError("Generator is already executing.");for(;h;)try{if(s=1,f&&(l=2&d[0]?f.return:d[0]?f.throw||((l=f.return)&&l.call(f),0):f.next)&&!(l=l.call(f,d[1])).done)return l;switch(f=0,l&&(d=[2&d[0],l.value]),d[0]){case 0:case 1:l=d;break;case 4:return h.label++,{value:d[1],done:!1};case 5:h.label++,f=d[1],d=[0];continue;case 7:d=h.ops.pop(),h.trys.pop();continue;default:if(!(l=(l=h.trys).length>0&&l[l.length-1])&&(6===d[0]||2===d[0])){h=0;continue}if(3===d[0]&&(!l||d[1]>l[0]&&d[1]<l[3])){h.label=d[1];break}if(6===d[0]&&h.label<l[1]){h.label=l[1],l=d;break}if(l&&h.label<l[2]){h.label=l[2],h.ops.push(d);break}l[2]&&h.ops.pop(),h.trys.pop();continue}d=t.call(e,h)}catch(e){d=[6,e],f=0}finally{s=l=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([d,p])}}var s,f,l,d,h={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return d={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d};define(["require","exports","./XDM"],(function(e,t,s){"use strict";function r(e,t){var s,f=window;"function"==typeof f.CustomEvent?s=new f.CustomEvent(e,t):(t=t||{bubbles:!1,cancelable:!1},(s=document.createEvent("CustomEvent")).initCustomEvent(e,t.bubbles,t.cancelable,t.detail)),window.dispatchEvent(s)}function o(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){return[2,m]}))}))}function i(e){return"Attempted to call "+e+"() before init() was complete. Wait for init to complete or place within a ready() callback."}function a(e){g||((g=document.createElement("style")).type="text/css",document.head.appendChild(g));var t=[];if(e)for(var s in e)t.push("--"+s+": "+e[s]);g.innerText=":root { "+t.join("; ")+" } body { color: var(--text-primary-color) }",r("themeApplied",{detail:e})}Object.defineProperty(t,"__esModule",{value:!0}),t.sdkVersion=3;var f=window;f._AzureDevOpsSDKVersion&&console.error("The AzureDevOps SDK is already loaded. Only one version of this module can be loaded in a given document."),f._AzureDevOpsSDKVersion=t.sdkVersion,function(e){e[e.Deployment=1]="Deployment",e[e.Enterprise=2]="Enterprise",e[e.Organization=4]="Organization"}(t.HostType||(t.HostType={}));var l,d,h,p,v,g,w,y="DevOps.HostControl",b=s.channelManager.addChannel(window.parent),m=new Promise((function(e){w=e}));b.getObjectRegistry().register("DevOps.SdkClient",{dispatchEvent:r}),t.init=function(e){return new Promise((function(s){var f=__assign({},e,{sdkVersion:t.sdkVersion});b.invokeRemoteMethod("initialHandshake",y,[f]).then((function(e){d=e.initialConfig||{},h=e.contributionId;var t=e.context;l=t.extension,p=t.user,v=t.host,e.themeData&&(a(e.themeData),window.addEventListener("themeChanged",(function(e){a(e.detail.data)}))),w(),s()}))}))},t.ready=o,t.notifyLoadSucceeded=function(){return b.invokeRemoteMethod("notifyLoadSucceeded",y)},t.notifyLoadFailed=function(e){return b.invokeRemoteMethod("notifyLoadFailed",y,[e])},t.getConfiguration=function(){if(!d)throw new Error(i("getConfiguration"));return d},t.getContributionId=function(){if(!h)throw new Error(i("getContributionId"));return h},t.getUser=function(){if(!p)throw new Error(i("getUser"));return p},t.getHost=function(){if(!v)throw new Error(i("getHost"));return v},t.getExtensionContext=function(){if(!l)throw new Error(i("getExtensionContext"));return l},t.getService=function(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){return[2,o().then((function(){return b.invokeRemoteMethod("getService","DevOps.ServiceManager",[e])}))]}))}))},t.register=function(e,t){b.getObjectRegistry().register(e,t)},t.unregister=function(e){b.getObjectRegistry().unregister(e)},t.getAccessToken=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){return[2,b.invokeRemoteMethod("getAccessToken",y).then((function(e){return e.token}))]}))}))},t.getAppToken=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){return[2,b.invokeRemoteMethod("getAppToken",y).then((function(e){return e.token}))]}))}))},t.resize=function(e,t){var s=document.body;if(s){var f="number"==typeof e?e:s?s.scrollWidth:void 0,l="number"==typeof t?t:s?s.scrollHeight:void 0;b.invokeRemoteMethod("resize",y,[f,l])}},t.applyTheme=a}));